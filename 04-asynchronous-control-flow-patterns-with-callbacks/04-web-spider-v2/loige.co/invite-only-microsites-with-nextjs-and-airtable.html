<!DOCTYPE html><html lang="en" data-critters-container><head><meta charset="utf-8"><meta content="width=device-width,initial-scale=1" name="viewport"><link href="/favicon.svg" rel="icon" type="image/svg+xml"><meta content="Astro v4.1.1" name="generator"><link href="https://loige.co/sitemap-index.xml" rel="sitemap"><link href="https://loige.co/rss.xml" rel="alternate" type="application/rss+xml" title="Blog of Luciano Mammino - Cloud Architect and Fullstack Developer"><link href="/fonts/atkinson-regular.woff2" rel="preload" type="font/woff" as="font" crossorigin><link href="/fonts/atkinson-bold.woff2" rel="preload" type="font/woff" as="font" crossorigin><link href="https://loige.co/invite-only-microsites-with-nextjs-and-airtable/" rel="canonical"><title>Invite-only microsites with Next.js and AirTable</title><meta content="Invite-only microsites with Next.js and AirTable" name="title"><meta content="Learn how to create a private, invite-only website using Next.js, AirTable, custom React hooks, and Vercel deploy. The post covers backend APIs in Next.js, data storage with AirTable, validating access with invite codes, collecting user input, and deploying the final app." name="description"><link href="/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"><link href="/favicon-32x32.png" rel="icon" type="image/png" sizes="32x32"><link href="/favicon-16x16.png" rel="icon" type="image/png" sizes="16x16"><link href="/site.webmanifest" rel="manifest"><link href="/safari-pinned-tab.svg" rel="mask-icon" color="#22158a"><meta content="#22158a" name="msapplication-TileColor"><meta content="#22158a" name="theme-color"><meta content="231187154413670" property="fb:app_id"><meta content="article" property="og:type"><meta content="https://loige.co/invite-only-microsites-with-nextjs-and-airtable/" property="og:url"><meta content="Invite-only microsites with Next.js and AirTable" property="og:title"><meta content="Learn how to create a private, invite-only website using Next.js, AirTable, custom React hooks, and Vercel deploy. The post covers backend APIs in Next.js, data storage with AirTable, validating access with invite codes, collecting user input, and deploying the final app." property="og:description"><meta content="https://loige.co/og/invite-only-microsites-with-nextjs-and-airtable.png" property="og:image"><meta content="1200" property="og:image:width"><meta content="630" property="og:image:height"><meta content="summary_large_image" property="twitter:card"><meta content="https://loige.co/invite-only-microsites-with-nextjs-and-airtable/" property="twitter:url"><meta content="Invite-only microsites with Next.js and AirTable" property="twitter:title"><meta content="Learn how to create a private, invite-only website using Next.js, AirTable, custom React hooks, and Vercel deploy. The post covers backend APIs in Next.js, data storage with AirTable, validating access with invite codes, collecting user input, and deploying the final app." property="twitter:description"><meta content="https://loige.co/og/invite-only-microsites-with-nextjs-and-airtable.png" property="twitter:image"><meta content="loige" name="twitter:creator"><meta content="G-L3TVXXPHTW" name="google-tag-manager-id" id="google-tag-manager-id"><link href="https://www.google-analytics.com" rel="preconnect" id="preconnect-google-analytics"><link href="https://www.google-analytics.com" rel="dns-prefetch" id="dns-prefetch-google-analytics"><link href="https://webmention.io/loige.co/webmention" rel="webmention"><link href="https://webmention.io/loige.co/xmlrpc" rel="pingback"><script>const savedTheme=localStorage.getItem("theme"),preferredTheme=["dark","light"].includes(savedTheme)?savedTheme:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";document.documentElement.setAttribute("data-theme",preferredTheme)</script><style>*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content:""}html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:Atkinson,Avenir,Montserrat,Corbel,URW Gothic,source-sans-pro,sans-serif;font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}h1,h2,h3{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}strong{font-weight:bolder}code,pre{font-family:ui-monospace,Cascadia Code,Source Code Pro,Menlo,Consolas,DejaVu Sans Mono,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}button{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}button{text-transform:none}button,[type=button]{-webkit-appearance:button;background-color:transparent;background-image:none}summary{display:list-item}blockquote,dd,h1,h2,h3,p,pre{margin:0}ol,ul{list-style:none;margin:0;padding:0}button,[role=button]{cursor:pointer}img,svg{display:block;vertical-align:middle}img{max-width:100%;height:auto}*,:before,:after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / .5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.prose{color:var(--tw-prose-body);max-width:65ch}.prose :where(p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em;margin-bottom:1.25em}.prose :where(a):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-links);text-decoration:underline;font-weight:500}.prose :where(strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-bold);font-weight:600}.prose :where(blockquote strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(ol):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:decimal;margin-top:1.25em;margin-bottom:1.25em;padding-left:1.625em}.prose :where(ul):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:disc;margin-top:1.25em;margin-bottom:1.25em;padding-left:1.625em}.prose :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *))::marker{font-weight:400;color:var(--tw-prose-counters)}.prose :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *))::marker{color:var(--tw-prose-bullets)}.prose :where(blockquote):not(:where([class~=not-prose],[class~=not-prose] *)){font-weight:500;font-style:italic;color:var(--tw-prose-quotes);border-left-width:.25rem;border-left-color:var(--tw-prose-quote-borders);quotes:"“""”""‘""’";margin-top:1.6em;margin-bottom:1.6em;padding-left:1em}.prose :where(blockquote p:first-of-type):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:open-quote}.prose :where(blockquote p:last-of-type):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:close-quote}.prose :where(h2):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:700;font-size:1.5em;margin-top:2em;margin-bottom:1em;line-height:1.3333333}.prose :where(h3):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;font-size:1.25em;margin-top:1.6em;margin-bottom:.6em;line-height:1.6}.prose :where(img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:2em;margin-bottom:2em}.prose :where(code):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-code);font-weight:600;font-size:.875em}.prose :where(code):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:"`"}.prose :where(code):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:"`"}.prose :where(a code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(h3 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-size:.9em}.prose :where(blockquote code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(pre):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-pre-code);background-color:var(--tw-prose-pre-bg);overflow-x:auto;font-weight:400;font-size:.875em;line-height:1.7142857;margin-top:1.7142857em;margin-bottom:1.7142857em;border-radius:.375rem;padding:.8571429em 1.1428571em}.prose :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)){background-color:transparent;border-width:0;border-radius:0;padding:0;font-weight:inherit;color:inherit;font-size:inherit;font-family:inherit;line-height:inherit}.prose :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:none}.prose :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:none}.prose{--tw-prose-body:#374151;--tw-prose-headings:#111827;--tw-prose-lead:#4b5563;--tw-prose-links:#111827;--tw-prose-bold:#111827;--tw-prose-counters:#6b7280;--tw-prose-bullets:#d1d5db;--tw-prose-hr:#e5e7eb;--tw-prose-quotes:#111827;--tw-prose-quote-borders:#e5e7eb;--tw-prose-captions:#6b7280;--tw-prose-kbd:#111827;--tw-prose-kbd-shadows:17 24 39;--tw-prose-code:#111827;--tw-prose-pre-code:#e5e7eb;--tw-prose-pre-bg:#1f2937;--tw-prose-th-borders:#d1d5db;--tw-prose-td-borders:#e5e7eb;--tw-prose-invert-body:#d1d5db;--tw-prose-invert-headings:#fff;--tw-prose-invert-lead:#9ca3af;--tw-prose-invert-links:#fff;--tw-prose-invert-bold:#fff;--tw-prose-invert-counters:#9ca3af;--tw-prose-invert-bullets:#4b5563;--tw-prose-invert-hr:#374151;--tw-prose-invert-quotes:#f3f4f6;--tw-prose-invert-quote-borders:#374151;--tw-prose-invert-captions:#9ca3af;--tw-prose-invert-kbd:#fff;--tw-prose-invert-kbd-shadows:255 255 255;--tw-prose-invert-code:#fff;--tw-prose-invert-pre-code:#d1d5db;--tw-prose-invert-pre-bg:rgb(0 0 0 / 50%);--tw-prose-invert-th-borders:#4b5563;--tw-prose-invert-td-borders:#374151;font-size:1rem;line-height:1.75}.prose :where(li):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.5em;margin-bottom:.5em}.prose :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-left:.375em}.prose :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-left:.375em}.prose :where(.prose>ul>li>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em}.prose :where(.prose>ul>li>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em}.prose :where(.prose>ol>li>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em}.prose :where(.prose>ol>li>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em}.prose :where(h2+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(h3+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(.prose>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(.prose>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.inset-x-0{left:0;right:0}.top-0{top:0}.z-40{z-index:40}.z-50{z-index:50}.col-span-10{grid-column:span 10/span 10}.col-span-7{grid-column:span 7/span 7}.mx-auto{margin-left:auto;margin-right:auto}.-mt-32{margin-top:-8rem}.mb-2{margin-bottom:.5rem}.mb-20{margin-bottom:5rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.mb-auto{margin-bottom:auto}.ml-1{margin-left:.25rem}.mr-2{margin-right:.5rem}.mt-0\.5{margin-top:.125rem}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mt-4{margin-top:1rem}.mt-8{margin-top:2rem}.line-clamp-3{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3}.block{display:block}.inline-block{display:inline-block}.flex{display:flex}.inline-flex{display:inline-flex}.grid{display:grid}.hidden{display:none}.h-10{height:2.5rem}.h-4{height:1rem}.h-5{height:1.25rem}.h-56{height:14rem}.h-8{height:2rem}.h-\[300px\]{height:300px}.min-h-screen{min-height:100vh}.w-10{width:2.5rem}.w-4{width:1rem}.w-5{width:1.25rem}.w-8{width:2rem}.w-full{width:100%}.max-w-screen-xl{max-width:1280px}.max-w-sm{max-width:24rem}.flex-1{flex:1 1 0%}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.items-baseline{align-items:baseline}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:.25rem}.gap-2{gap:.5rem}.gap-4{gap:1rem}.gap-8{gap:2rem}.gap-x-16{-moz-column-gap:4rem;column-gap:4rem}.self-center{align-self:center}.overflow-hidden{overflow:hidden}.text-ellipsis{text-overflow:ellipsis}.text-nowrap{text-wrap:nowrap}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.border{border-width:1px}.border-b{border-bottom-width:1px}.border-t{border-top-width:1px}.border-t-4{border-top-width:4px}.border-bg-200{border-color:var(--color-bg-200)}.border-primary-200{border-color:var(--color-primary-200)}.border-primary-700{border-color:var(--color-primary-700)}.border-secondary-200{border-color:var(--color-secondary-200)}.border-text-100{border-color:var(--color-text-100)}.bg-bg-100{background-color:var(--color-bg-100)}.bg-bg-300{background-color:var(--color-bg-300)}.bg-bg-400{background-color:var(--color-bg-400)}.bg-bg-500{background-color:var(--color-bg-500)}.bg-bg-900{background-color:var(--color-bg-900)}.bg-primary-100{background-color:var(--color-primary-100)}.bg-secondary-100{background-color:var(--color-secondary-100)}.object-cover{-o-object-fit:cover;object-fit:cover}.p-2{padding:.5rem}.p-4{padding:1rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-8{padding-left:2rem;padding-right:2rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-16{padding-top:4rem;padding-bottom:4rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-8{padding-top:2rem;padding-bottom:2rem}.pb-16{padding-bottom:4rem}.pb-32{padding-bottom:8rem}.pb-8{padding-bottom:2rem}.pl-2{padding-left:.5rem}.pt-8{padding-top:2rem}.text-center{text-align:center}.align-baseline{vertical-align:baseline}.align-middle{vertical-align:middle}.font-sans{font-family:Atkinson,Avenir,Montserrat,Corbel,URW Gothic,source-sans-pro,sans-serif}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-sm\/relaxed{font-size:.875rem;line-height:1.625}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xl\/relaxed{font-size:1.25rem;line-height:1.625}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-normal{font-weight:400}.uppercase{text-transform:uppercase}.leading-normal{line-height:1.5}.text-primary-100{color:var(--color-primary-100)}.text-primary-300{color:var(--color-primary-300)}.text-primary-500{color:var(--color-primary-500)}.text-red-400{--tw-text-opacity:1;color:rgb(248 113 113/var(--tw-text-opacity))}.text-slate-400{--tw-text-opacity:1;color:rgb(148 163 184/var(--tw-text-opacity))}.text-text-100{color:var(--color-text-100)}.text-text-200{color:var(--color-text-200)}.text-text-300{color:var(--color-text-300)}.text-text-400{color:var(--color-text-400)}.text-text-500{color:var(--color-text-500)}.text-yellow-500{--tw-text-opacity:1;color:rgb(234 179 8/var(--tw-text-opacity))}.underline{text-decoration-line:underline}.decoration-accent-500{text-decoration-color:var(--color-accent-500)}.decoration-2{text-decoration-thickness:2px}.decoration-4{text-decoration-thickness:4px}.underline-offset-4{text-underline-offset:4px}.underline-offset-8{text-underline-offset:8px}.shadow-md{--tw-shadow:0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-xl{--tw-shadow:0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.outline-4{outline-width:4px}.outline-primary-500{outline-color:var(--color-primary-500)}.transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.\[background\:radial-gradient\(circle_at_30\%_0\%\,_var\(--color-primary-900\)_0\%\,var\(--color-primary-700\)_30\%\)\]{background:radial-gradient(circle at 30% 0%,var(--color-primary-900) 0%,var(--color-primary-700) 30%)}@media (min-width:768px){.md\:prose-lg{font-size:1.125rem;line-height:1.7777778}.md\:prose-lg :where(p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.3333333em;margin-bottom:1.3333333em}.md\:prose-lg :where(blockquote):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.6666667em;margin-bottom:1.6666667em;padding-left:1em}.md\:prose-lg :where(h2):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:1.6666667em;margin-top:1.8666667em;margin-bottom:1.0666667em;line-height:1.3333333}.md\:prose-lg :where(h3):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:1.3333333em;margin-top:1.6666667em;margin-bottom:.6666667em;line-height:1.5}.md\:prose-lg :where(img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.7777778em;margin-bottom:1.7777778em}.md\:prose-lg :where(code):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.8888889em}.md\:prose-lg :where(h3 code):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.875em}.md\:prose-lg :where(pre):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.8888889em;line-height:1.75;margin-top:2em;margin-bottom:2em;border-radius:.375rem;padding:1em 1.5em}.md\:prose-lg :where(ol):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.3333333em;margin-bottom:1.3333333em;padding-left:1.5555556em}.md\:prose-lg :where(ul):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.3333333em;margin-bottom:1.3333333em;padding-left:1.5555556em}.md\:prose-lg :where(li):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.6666667em;margin-bottom:.6666667em}.md\:prose-lg :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-left:.4444444em}.md\:prose-lg :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-left:.4444444em}.md\:prose-lg :where(.md\:prose-lg>ul>li>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.3333333em}.md\:prose-lg :where(.md\:prose-lg>ul>li>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.3333333em}.md\:prose-lg :where(.md\:prose-lg>ol>li>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.3333333em}.md\:prose-lg :where(.md\:prose-lg>ol>li>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.3333333em}.md\:prose-lg :where(h2+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.md\:prose-lg :where(h3+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.md\:prose-lg :where(.md\:prose-lg>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.md\:prose-lg :where(.md\:prose-lg>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0}}@media (min-width:1024px){.lg\:prose-xl{font-size:1.25rem;line-height:1.8}.lg\:prose-xl :where(p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.2em;margin-bottom:1.2em}.lg\:prose-xl :where(blockquote):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.6em;margin-bottom:1.6em;padding-left:1.0666667em}.lg\:prose-xl :where(h2):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:1.8em;margin-top:1.5555556em;margin-bottom:.8888889em;line-height:1.1111111}.lg\:prose-xl :where(h3):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:1.5em;margin-top:1.6em;margin-bottom:.6666667em;line-height:1.3333333}.lg\:prose-xl :where(img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:2em;margin-bottom:2em}.lg\:prose-xl :where(code):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.9em}.lg\:prose-xl :where(h3 code):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.9em}.lg\:prose-xl :where(pre):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.9em;line-height:1.7777778;margin-top:2em;margin-bottom:2em;border-radius:.5rem;padding:1.1111111em 1.3333333em}.lg\:prose-xl :where(ol):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.2em;margin-bottom:1.2em;padding-left:1.6em}.lg\:prose-xl :where(ul):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.2em;margin-bottom:1.2em;padding-left:1.6em}.lg\:prose-xl :where(li):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.6em;margin-bottom:.6em}.lg\:prose-xl :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-left:.4em}.lg\:prose-xl :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-left:.4em}.lg\:prose-xl :where(.lg\:prose-xl>ul>li>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.2em}.lg\:prose-xl :where(.lg\:prose-xl>ul>li>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.2em}.lg\:prose-xl :where(.lg\:prose-xl>ol>li>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.2em}.lg\:prose-xl :where(.lg\:prose-xl>ol>li>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.2em}.lg\:prose-xl :where(h2+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.lg\:prose-xl :where(h3+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.lg\:prose-xl :where(.lg\:prose-xl>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.lg\:prose-xl :where(.lg\:prose-xl>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0}}@keyframes spin{to{transform:rotate(360deg)}}.hover\:animate-spin:hover{animation:spin 1s linear infinite}@keyframes wiggle{0%{transform:rotate(0)}25%{transform:rotate(45deg)}50%{transform:rotate(0)}75%{transform:rotate(-15deg)}to{transform:rotate(0)}}.hover\:animate-wiggle:hover{animation:wiggle 1s ease-out infinite}.hover\:border-primary-300:hover{border-color:var(--color-primary-300)}.hover\:border-secondary-300:hover{border-color:var(--color-secondary-300)}.hover\:bg-bg-600:hover{background-color:var(--color-bg-600)}.hover\:bg-primary-200:hover{background-color:var(--color-primary-200)}.hover\:bg-secondary-200:hover{background-color:var(--color-secondary-200)}.hover\:text-accent-700:hover{color:var(--color-accent-700)}.hover\:text-primary-600:hover{color:var(--color-primary-600)}.hover\:text-primary-700:hover{color:var(--color-primary-700)}.hover\:text-text-500:hover{color:var(--color-text-500)}.hover\:underline:hover{text-decoration-line:underline}.hover\:shadow-lg:hover{--tw-shadow:0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.hover\:outline:hover{outline-style:solid}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\:ring-2:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\:ring-bg-800:focus{--tw-ring-color:var(--color-bg-800)}.group:hover .group-hover\:text-slate-300{--tw-text-opacity:1;color:rgb(203 213 225/var(--tw-text-opacity))}.group:hover .group-hover\:text-yellow-600{--tw-text-opacity:1;color:rgb(202 138 4/var(--tw-text-opacity))}.prose-h2\:text-text-500 :is(:where(h2):not(:where([class~=not-prose],[class~=not-prose] *))){color:var(--color-text-500)}.prose-h3\:text-text-500 :is(:where(h3):not(:where([class~=not-prose],[class~=not-prose] *))){color:var(--color-text-500)}.prose-a\:text-primary-700 :is(:where(a):not(:where([class~=not-prose],[class~=not-prose] *))){color:var(--color-primary-700)}.prose-a\:decoration-text-200 :is(:where(a):not(:where([class~=not-prose],[class~=not-prose] *))){text-decoration-color:var(--color-text-200)}.prose-a\:underline-offset-4 :is(:where(a):not(:where([class~=not-prose],[class~=not-prose] *))){text-underline-offset:4px}.hover\:prose-a\:text-primary-500 :is(:where(a):not(:where([class~=not-prose],[class~=not-prose] *))):hover{color:var(--color-primary-500)}.hover\:prose-a\:decoration-primary-500 :is(:where(a):not(:where([class~=not-prose],[class~=not-prose] *))):hover{text-decoration-color:var(--color-primary-500)}.prose-blockquote\:text-text-500 :is(:where(blockquote):not(:where([class~=not-prose],[class~=not-prose] *))){color:var(--color-text-500)}.prose-strong\:text-text-500 :is(:where(strong):not(:where([class~=not-prose],[class~=not-prose] *))){color:var(--color-text-500)}.prose-em\:text-text-500 :is(:where(em):not(:where([class~=not-prose],[class~=not-prose] *))){color:var(--color-text-500)}.prose-code\:text-text-500 :is(:where(code):not(:where([class~=not-prose],[class~=not-prose] *))){color:var(--color-text-500)}.prose-pre\:text-text-400 :is(:where(pre):not(:where([class~=not-prose],[class~=not-prose] *))){color:var(--color-text-400)}.prose-ol\:text-text-400 :is(:where(ol):not(:where([class~=not-prose],[class~=not-prose] *))){color:var(--color-text-400)}.prose-ul\:text-text-400 :is(:where(ul):not(:where([class~=not-prose],[class~=not-prose] *))){color:var(--color-text-400)}.prose-li\:text-text-400 :is(:where(li):not(:where([class~=not-prose],[class~=not-prose] *))){color:var(--color-text-400)}.prose-img\:text-text-400 :is(:where(img):not(:where([class~=not-prose],[class~=not-prose] *))){color:var(--color-text-400)}@media (min-width:640px){.sm\:h-\[500px\]{height:500px}.sm\:p-6{padding:1.5rem}}@media (min-width:768px){.md\:mb-0{margin-bottom:0}.md\:mt-0{margin-top:0}.md\:block{display:block}.md\:flex{display:flex}.md\:hidden{display:none}.md\:w-auto{width:auto}.md\:flex-1{flex:1 1 0%}.md\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.md\:flex-row{flex-direction:row}.md\:flex-wrap{flex-wrap:wrap}.md\:justify-between{justify-content:space-between}.md\:gap-4{gap:1rem}.md\:space-x-8>:not([hidden])~:not([hidden]){--tw-space-x-reverse:0;margin-right:calc(2rem*var(--tw-space-x-reverse));margin-left:calc(2rem*calc(1 - var(--tw-space-x-reverse)))}.md\:border-0{border-width:0}.md\:bg-transparent{background-color:transparent}.md\:p-0{padding:0}.md\:text-2xl\/relaxed{font-size:1.5rem;line-height:1.625}.md\:text-5xl{font-size:3rem;line-height:1}}@media (min-width:1024px){.lg\:col-span-3{grid-column:span 3/span 3}.lg\:mb-0{margin-bottom:0}.lg\:grid-cols-10{grid-template-columns:repeat(10,minmax(0,1fr))}.lg\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.lg\:flex-col{flex-direction:column}.lg\:gap-8{gap:2rem}.lg\:border-0{border-width:0}.lg\:pb-0{padding-bottom:0}}@media (min-width:1280px){.xl\:mx-auto{margin-left:auto;margin-right:auto}.xl\:max-w-screen-xl{max-width:1280px}.xl\:rounded-xl{border-radius:.75rem}}*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content:""}html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:Atkinson,Avenir,Montserrat,Corbel,URW Gothic,source-sans-pro,sans-serif;font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}h1,h2,h3{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}strong{font-weight:bolder}code,pre{font-family:ui-monospace,Cascadia Code,Source Code Pro,Menlo,Consolas,DejaVu Sans Mono,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}button{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}button{text-transform:none}button,[type=button]{-webkit-appearance:button;background-color:transparent;background-image:none}summary{display:list-item}blockquote,dd,h1,h2,h3,p,pre{margin:0}ol,ul{list-style:none;margin:0;padding:0}button,[role=button]{cursor:pointer}img,svg{display:block;vertical-align:middle}img{max-width:100%;height:auto}*,:before,:after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / .5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.prose{color:var(--tw-prose-body);max-width:65ch}.prose :where(p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em;margin-bottom:1.25em}.prose :where(a):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-links);text-decoration:underline;font-weight:500}.prose :where(strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-bold);font-weight:600}.prose :where(blockquote strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(ol):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:decimal;margin-top:1.25em;margin-bottom:1.25em;padding-left:1.625em}.prose :where(ul):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:disc;margin-top:1.25em;margin-bottom:1.25em;padding-left:1.625em}.prose :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *))::marker{font-weight:400;color:var(--tw-prose-counters)}.prose :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *))::marker{color:var(--tw-prose-bullets)}.prose :where(blockquote):not(:where([class~=not-prose],[class~=not-prose] *)){font-weight:500;font-style:italic;color:var(--tw-prose-quotes);border-left-width:.25rem;border-left-color:var(--tw-prose-quote-borders);quotes:"“""”""‘""’";margin-top:1.6em;margin-bottom:1.6em;padding-left:1em}.prose :where(blockquote p:first-of-type):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:open-quote}.prose :where(blockquote p:last-of-type):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:close-quote}.prose :where(h2):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:700;font-size:1.5em;margin-top:2em;margin-bottom:1em;line-height:1.3333333}.prose :where(h3):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;font-size:1.25em;margin-top:1.6em;margin-bottom:.6em;line-height:1.6}.prose :where(img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:2em;margin-bottom:2em}.prose :where(code):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-code);font-weight:600;font-size:.875em}.prose :where(code):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:"`"}.prose :where(code):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:"`"}.prose :where(a code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(h3 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-size:.9em}.prose :where(blockquote code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(pre):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-pre-code);background-color:var(--tw-prose-pre-bg);overflow-x:auto;font-weight:400;font-size:.875em;line-height:1.7142857;margin-top:1.7142857em;margin-bottom:1.7142857em;border-radius:.375rem;padding:.8571429em 1.1428571em}.prose :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)){background-color:transparent;border-width:0;border-radius:0;padding:0;font-weight:inherit;color:inherit;font-size:inherit;font-family:inherit;line-height:inherit}.prose :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:none}.prose :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:none}.prose{--tw-prose-body:#374151;--tw-prose-headings:#111827;--tw-prose-lead:#4b5563;--tw-prose-links:#111827;--tw-prose-bold:#111827;--tw-prose-counters:#6b7280;--tw-prose-bullets:#d1d5db;--tw-prose-hr:#e5e7eb;--tw-prose-quotes:#111827;--tw-prose-quote-borders:#e5e7eb;--tw-prose-captions:#6b7280;--tw-prose-kbd:#111827;--tw-prose-kbd-shadows:17 24 39;--tw-prose-code:#111827;--tw-prose-pre-code:#e5e7eb;--tw-prose-pre-bg:#1f2937;--tw-prose-th-borders:#d1d5db;--tw-prose-td-borders:#e5e7eb;--tw-prose-invert-body:#d1d5db;--tw-prose-invert-headings:#fff;--tw-prose-invert-lead:#9ca3af;--tw-prose-invert-links:#fff;--tw-prose-invert-bold:#fff;--tw-prose-invert-counters:#9ca3af;--tw-prose-invert-bullets:#4b5563;--tw-prose-invert-hr:#374151;--tw-prose-invert-quotes:#f3f4f6;--tw-prose-invert-quote-borders:#374151;--tw-prose-invert-captions:#9ca3af;--tw-prose-invert-kbd:#fff;--tw-prose-invert-kbd-shadows:255 255 255;--tw-prose-invert-code:#fff;--tw-prose-invert-pre-code:#d1d5db;--tw-prose-invert-pre-bg:rgb(0 0 0 / 50%);--tw-prose-invert-th-borders:#4b5563;--tw-prose-invert-td-borders:#374151;font-size:1rem;line-height:1.75}.prose :where(li):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.5em;margin-bottom:.5em}.prose :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-left:.375em}.prose :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-left:.375em}.prose :where(.prose>ul>li>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em}.prose :where(.prose>ul>li>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em}.prose :where(.prose>ol>li>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em}.prose :where(.prose>ol>li>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em}.prose :where(h2+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(h3+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(.prose>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(.prose>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.inset-x-0{left:0;right:0}.top-0{top:0}.z-40{z-index:40}.z-50{z-index:50}.col-span-10{grid-column:span 10/span 10}.col-span-7{grid-column:span 7/span 7}.mx-auto{margin-left:auto;margin-right:auto}.-mt-32{margin-top:-8rem}.mb-2{margin-bottom:.5rem}.mb-20{margin-bottom:5rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.mb-auto{margin-bottom:auto}.ml-1{margin-left:.25rem}.mr-2{margin-right:.5rem}.mt-0\.5{margin-top:.125rem}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mt-4{margin-top:1rem}.mt-8{margin-top:2rem}.line-clamp-3{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3}.block{display:block}.inline-block{display:inline-block}.flex{display:flex}.inline-flex{display:inline-flex}.grid{display:grid}.hidden{display:none}.h-10{height:2.5rem}.h-4{height:1rem}.h-5{height:1.25rem}.h-56{height:14rem}.h-8{height:2rem}.h-\[300px\]{height:300px}.min-h-screen{min-height:100vh}.w-10{width:2.5rem}.w-4{width:1rem}.w-5{width:1.25rem}.w-8{width:2rem}.w-full{width:100%}.max-w-screen-xl{max-width:1280px}.max-w-sm{max-width:24rem}.flex-1{flex:1 1 0%}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.items-baseline{align-items:baseline}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:.25rem}.gap-2{gap:.5rem}.gap-4{gap:1rem}.gap-8{gap:2rem}.gap-x-16{-moz-column-gap:4rem;column-gap:4rem}.self-center{align-self:center}.overflow-hidden{overflow:hidden}.text-ellipsis{text-overflow:ellipsis}.text-nowrap{text-wrap:nowrap}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.border{border-width:1px}.border-b{border-bottom-width:1px}.border-t{border-top-width:1px}.border-t-4{border-top-width:4px}.border-bg-200{border-color:var(--color-bg-200)}.border-primary-200{border-color:var(--color-primary-200)}.border-primary-700{border-color:var(--color-primary-700)}.border-secondary-200{border-color:var(--color-secondary-200)}.border-text-100{border-color:var(--color-text-100)}.bg-bg-100{background-color:var(--color-bg-100)}.bg-bg-300{background-color:var(--color-bg-300)}.bg-bg-400{background-color:var(--color-bg-400)}.bg-bg-500{background-color:var(--color-bg-500)}.bg-bg-900{background-color:var(--color-bg-900)}.bg-primary-100{background-color:var(--color-primary-100)}.bg-secondary-100{background-color:var(--color-secondary-100)}.object-cover{-o-object-fit:cover;object-fit:cover}.p-2{padding:.5rem}.p-4{padding:1rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-8{padding-left:2rem;padding-right:2rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-16{padding-top:4rem;padding-bottom:4rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-8{padding-top:2rem;padding-bottom:2rem}.pb-16{padding-bottom:4rem}.pb-32{padding-bottom:8rem}.pb-8{padding-bottom:2rem}.pl-2{padding-left:.5rem}.pt-8{padding-top:2rem}.text-center{text-align:center}.align-baseline{vertical-align:baseline}.align-middle{vertical-align:middle}.font-sans{font-family:Atkinson,Avenir,Montserrat,Corbel,URW Gothic,source-sans-pro,sans-serif}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-sm\/relaxed{font-size:.875rem;line-height:1.625}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xl\/relaxed{font-size:1.25rem;line-height:1.625}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-normal{font-weight:400}.uppercase{text-transform:uppercase}.leading-normal{line-height:1.5}.text-primary-100{color:var(--color-primary-100)}.text-primary-300{color:var(--color-primary-300)}.text-primary-500{color:var(--color-primary-500)}.text-red-400{--tw-text-opacity:1;color:rgb(248 113 113/var(--tw-text-opacity))}.text-slate-400{--tw-text-opacity:1;color:rgb(148 163 184/var(--tw-text-opacity))}.text-text-100{color:var(--color-text-100)}.text-text-200{color:var(--color-text-200)}.text-text-300{color:var(--color-text-300)}.text-text-400{color:var(--color-text-400)}.text-text-500{color:var(--color-text-500)}.text-yellow-500{--tw-text-opacity:1;color:rgb(234 179 8/var(--tw-text-opacity))}.underline{text-decoration-line:underline}.decoration-accent-500{text-decoration-color:var(--color-accent-500)}.decoration-2{text-decoration-thickness:2px}.decoration-4{text-decoration-thickness:4px}.underline-offset-4{text-underline-offset:4px}.underline-offset-8{text-underline-offset:8px}.shadow-md{--tw-shadow:0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-xl{--tw-shadow:0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.outline-4{outline-width:4px}.outline-primary-500{outline-color:var(--color-primary-500)}.transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.\[background\:radial-gradient\(circle_at_30\%_0\%\,_var\(--color-primary-900\)_0\%\,var\(--color-primary-700\)_30\%\)\]{background:radial-gradient(circle at 30% 0%,var(--color-primary-900) 0%,var(--color-primary-700) 30%)}@font-face{font-family:Atkinson;font-style:normal;font-weight:400;font-display:swap;src:url(/fonts/atkinson-regular.woff2)format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Atkinson;font-style:normal;font-weight:700;font-display:swap;src:url(/fonts/atkinson-bold.woff2)format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}:root{--bg:#f7f7f7;--color-bg-100:rgb(254 254 254);--color-bg-200:rgb(253 253 253);--color-bg-300:rgb(252 252 252);--color-bg-400:rgb(249 249 249);--color-bg-500:rgb(247 247 247);--color-bg-600:rgb(222 222 222);--color-bg-700:rgb(148 148 148);--color-bg-800:rgb(111 111 111);--color-bg-900:rgb(74 74 74);--text:#151828;--color-text-50:rgb(251, 251, 251);--color-text-100:rgb(232 232 234);--color-text-200:rgb(197 197 201);--color-text-300:rgb(161 163 169);--color-text-400:rgb(91 93 105);--color-text-500:rgb(21 24 40);--color-text-600:rgb(19 22 36);--color-text-700:rgb(13 14 24);--color-text-800:rgb(9 11 18);--color-text-900:rgb(6 7 12);--primary:#22158a;--color-primary-100:rgb(233 232 243);--color-primary-200:rgb(200 197 226);--color-primary-300:rgb(167 161 208);--color-primary-400:rgb(100 91 173);--color-primary-500:rgb(34 21 138);--color-primary-600:rgb(31 19 124);--color-primary-700:rgb(20 13 83);--color-primary-800:rgb(15 9 62);--color-primary-900:rgb(10 6 41);--secondary:#8796b0;--color-secondary-100:rgb(243 245 247);--color-secondary-200:rgb(225 229 235);--color-secondary-300:rgb(207 213 223);--color-secondary-400:rgb(171 182 200);--color-secondary-500:rgb(135 150 176);--color-secondary-600:rgb(122 135 158);--color-secondary-700:rgb(81 90 106);--color-secondary-800:rgb(61 68 79);--color-secondary-900:rgb(41 45 53);--accent:#48ea5b;--color-accent-100:rgb(237 253 239);--color-accent-200:rgb(209 250 214);--color-accent-300:rgb(182 247 189);--color-accent-400:rgb(127 240 140);--color-accent-500:rgb(72 234 91);--color-accent-600:rgb(65 211 82);--color-accent-700:rgb(43 140 55);--color-accent-800:rgb(32 105 41);--color-accent-900:rgb(22 70 27)}body{margin:0;padding:0;text-align:left;background-color:var(--color-bg-500);word-wrap:break-word;overflow-wrap:break-word;font-size:20px;line-height:1.7}div,article,header,footer,nav,main,aside,a{transition-property:color,background-color;transition-timing-function:ease-in-out;transition-duration:.15s}@media (min-width:768px){.md\:prose-lg{font-size:1.125rem;line-height:1.7777778}.md\:prose-lg :where(p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.3333333em;margin-bottom:1.3333333em}.md\:prose-lg :where(blockquote):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.6666667em;margin-bottom:1.6666667em;padding-left:1em}.md\:prose-lg :where(h2):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:1.6666667em;margin-top:1.8666667em;margin-bottom:1.0666667em;line-height:1.3333333}.md\:prose-lg :where(h3):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:1.3333333em;margin-top:1.6666667em;margin-bottom:.6666667em;line-height:1.5}.md\:prose-lg :where(img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.7777778em;margin-bottom:1.7777778em}.md\:prose-lg :where(code):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.8888889em}.md\:prose-lg :where(h3 code):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.875em}.md\:prose-lg :where(pre):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.8888889em;line-height:1.75;margin-top:2em;margin-bottom:2em;border-radius:.375rem;padding:1em 1.5em}.md\:prose-lg :where(ol):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.3333333em;margin-bottom:1.3333333em;padding-left:1.5555556em}.md\:prose-lg :where(ul):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.3333333em;margin-bottom:1.3333333em;padding-left:1.5555556em}.md\:prose-lg :where(li):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.6666667em;margin-bottom:.6666667em}.md\:prose-lg :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-left:.4444444em}.md\:prose-lg :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-left:.4444444em}.md\:prose-lg :where(.md\:prose-lg>ul>li>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.3333333em}.md\:prose-lg :where(.md\:prose-lg>ul>li>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.3333333em}.md\:prose-lg :where(.md\:prose-lg>ol>li>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.3333333em}.md\:prose-lg :where(.md\:prose-lg>ol>li>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.3333333em}.md\:prose-lg :where(h2+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.md\:prose-lg :where(h3+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.md\:prose-lg :where(.md\:prose-lg>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.md\:prose-lg :where(.md\:prose-lg>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0}}@media (min-width:1024px){.lg\:prose-xl{font-size:1.25rem;line-height:1.8}.lg\:prose-xl :where(p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.2em;margin-bottom:1.2em}.lg\:prose-xl :where(blockquote):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.6em;margin-bottom:1.6em;padding-left:1.0666667em}.lg\:prose-xl :where(h2):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:1.8em;margin-top:1.5555556em;margin-bottom:.8888889em;line-height:1.1111111}.lg\:prose-xl :where(h3):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:1.5em;margin-top:1.6em;margin-bottom:.6666667em;line-height:1.3333333}.lg\:prose-xl :where(img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:2em;margin-bottom:2em}.lg\:prose-xl :where(code):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.9em}.lg\:prose-xl :where(h3 code):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.9em}.lg\:prose-xl :where(pre):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.9em;line-height:1.7777778;margin-top:2em;margin-bottom:2em;border-radius:.5rem;padding:1.1111111em 1.3333333em}.lg\:prose-xl :where(ol):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.2em;margin-bottom:1.2em;padding-left:1.6em}.lg\:prose-xl :where(ul):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.2em;margin-bottom:1.2em;padding-left:1.6em}.lg\:prose-xl :where(li):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.6em;margin-bottom:.6em}.lg\:prose-xl :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-left:.4em}.lg\:prose-xl :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-left:.4em}.lg\:prose-xl :where(.lg\:prose-xl>ul>li>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.2em}.lg\:prose-xl :where(.lg\:prose-xl>ul>li>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.2em}.lg\:prose-xl :where(.lg\:prose-xl>ol>li>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.2em}.lg\:prose-xl :where(.lg\:prose-xl>ol>li>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.2em}.lg\:prose-xl :where(h2+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.lg\:prose-xl :where(h3+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.lg\:prose-xl :where(.lg\:prose-xl>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.lg\:prose-xl :where(.lg\:prose-xl>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0}}@keyframes spin{to{transform:rotate(360deg)}}.hover\:animate-spin:hover{animation:spin 1s linear infinite}@keyframes wiggle{0%{transform:rotate(0)}25%{transform:rotate(45deg)}50%{transform:rotate(0)}75%{transform:rotate(-15deg)}to{transform:rotate(0)}}.hover\:animate-wiggle:hover{animation:wiggle 1s ease-out infinite}.hover\:border-primary-300:hover{border-color:var(--color-primary-300)}.hover\:border-secondary-300:hover{border-color:var(--color-secondary-300)}.hover\:bg-bg-600:hover{background-color:var(--color-bg-600)}.hover\:bg-primary-200:hover{background-color:var(--color-primary-200)}.hover\:bg-secondary-200:hover{background-color:var(--color-secondary-200)}.hover\:text-accent-700:hover{color:var(--color-accent-700)}.hover\:text-primary-600:hover{color:var(--color-primary-600)}.hover\:text-primary-700:hover{color:var(--color-primary-700)}.hover\:text-text-500:hover{color:var(--color-text-500)}.hover\:underline:hover{text-decoration-line:underline}.hover\:shadow-lg:hover{--tw-shadow:0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.hover\:outline:hover{outline-style:solid}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\:ring-2:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\:ring-bg-800:focus{--tw-ring-color:var(--color-bg-800)}.group:hover .group-hover\:text-slate-300{--tw-text-opacity:1;color:rgb(203 213 225/var(--tw-text-opacity))}.group:hover .group-hover\:text-yellow-600{--tw-text-opacity:1;color:rgb(202 138 4/var(--tw-text-opacity))}.prose-h2\:text-text-500 :is(:where(h2):not(:where([class~=not-prose],[class~=not-prose] *))){color:var(--color-text-500)}.prose-h3\:text-text-500 :is(:where(h3):not(:where([class~=not-prose],[class~=not-prose] *))){color:var(--color-text-500)}.prose-a\:text-primary-700 :is(:where(a):not(:where([class~=not-prose],[class~=not-prose] *))){color:var(--color-primary-700)}.prose-a\:decoration-text-200 :is(:where(a):not(:where([class~=not-prose],[class~=not-prose] *))){text-decoration-color:var(--color-text-200)}.prose-a\:underline-offset-4 :is(:where(a):not(:where([class~=not-prose],[class~=not-prose] *))){text-underline-offset:4px}.hover\:prose-a\:text-primary-500 :is(:where(a):not(:where([class~=not-prose],[class~=not-prose] *))):hover{color:var(--color-primary-500)}.hover\:prose-a\:decoration-primary-500 :is(:where(a):not(:where([class~=not-prose],[class~=not-prose] *))):hover{text-decoration-color:var(--color-primary-500)}.prose-blockquote\:text-text-500 :is(:where(blockquote):not(:where([class~=not-prose],[class~=not-prose] *))){color:var(--color-text-500)}.prose-strong\:text-text-500 :is(:where(strong):not(:where([class~=not-prose],[class~=not-prose] *))){color:var(--color-text-500)}.prose-em\:text-text-500 :is(:where(em):not(:where([class~=not-prose],[class~=not-prose] *))){color:var(--color-text-500)}.prose-code\:text-text-500 :is(:where(code):not(:where([class~=not-prose],[class~=not-prose] *))){color:var(--color-text-500)}.prose-pre\:text-text-400 :is(:where(pre):not(:where([class~=not-prose],[class~=not-prose] *))){color:var(--color-text-400)}.prose-ol\:text-text-400 :is(:where(ol):not(:where([class~=not-prose],[class~=not-prose] *))){color:var(--color-text-400)}.prose-ul\:text-text-400 :is(:where(ul):not(:where([class~=not-prose],[class~=not-prose] *))){color:var(--color-text-400)}.prose-li\:text-text-400 :is(:where(li):not(:where([class~=not-prose],[class~=not-prose] *))){color:var(--color-text-400)}.prose-img\:text-text-400 :is(:where(img):not(:where([class~=not-prose],[class~=not-prose] *))){color:var(--color-text-400)}@media (min-width:640px){.sm\:h-\[500px\]{height:500px}.sm\:p-6{padding:1.5rem}}@media (min-width:768px){.md\:mb-0{margin-bottom:0}.md\:mt-0{margin-top:0}.md\:block{display:block}.md\:flex{display:flex}.md\:hidden{display:none}.md\:w-auto{width:auto}.md\:flex-1{flex:1 1 0%}.md\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.md\:flex-row{flex-direction:row}.md\:flex-wrap{flex-wrap:wrap}.md\:justify-between{justify-content:space-between}.md\:gap-4{gap:1rem}.md\:space-x-8>:not([hidden])~:not([hidden]){--tw-space-x-reverse:0;margin-right:calc(2rem*var(--tw-space-x-reverse));margin-left:calc(2rem*calc(1 - var(--tw-space-x-reverse)))}.md\:border-0{border-width:0}.md\:bg-transparent{background-color:transparent}.md\:p-0{padding:0}.md\:text-2xl\/relaxed{font-size:1.5rem;line-height:1.625}.md\:text-5xl{font-size:3rem;line-height:1}}@media (min-width:1024px){.lg\:col-span-3{grid-column:span 3/span 3}.lg\:mb-0{margin-bottom:0}.lg\:grid-cols-10{grid-template-columns:repeat(10,minmax(0,1fr))}.lg\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.lg\:flex-col{flex-direction:column}.lg\:gap-8{gap:2rem}.lg\:border-0{border-width:0}.lg\:pb-0{padding-bottom:0}}@media (min-width:1280px){.xl\:mx-auto{margin-left:auto;margin-right:auto}.xl\:max-w-screen-xl{max-width:1280px}.xl\:rounded-xl{border-radius:.75rem}}a[data-astro-cid-sz7xmlte]{font-weight:700;color:var(--color-primary-100)}a[data-astro-cid-sz7xmlte]:hover{text-decoration:underline}</style><link href="/_astro/_slug_.vk7BFSP-.css" rel="stylesheet" media="print" onload="this.media='all'"><noscript><link rel="stylesheet" href="/_astro/_slug_.vk7BFSP-.css"></noscript><link href="/_astro/index.kJ7tNfRF.css" rel="stylesheet" media="print" onload="this.media='all'"><noscript><link rel="stylesheet" href="/_astro/index.kJ7tNfRF.css"></noscript><script src="/_astro/hoisted.I5GShsdJ.js" type="module"></script></head><body class="flex flex-col font-sans"><header class="text-text-500 bg-bg-500 inset-x-0 sticky top-0 z-50"><nav class="mx-auto max-w-screen-xl px-8"><div class="flex items-center justify-between flex-wrap mx-auto py-4"><a href="/" class="font-bold decoration-accent-500 underline-offset-8 hover:text-primary-700 hover:underline text-primary-500">Luciano Mammino</a> <button aria-controls="navbar-default" aria-expanded="false" class="inline-flex items-center focus:outline-none focus:ring-2 focus:ring-bg-800 h-10 hover:bg-bg-600 justify-center md:hidden p-2 rounded-lg text-sm text-text-500 w-10" data-collapse-toggle="navbar-default" type="button"><span class="sr-only">Open main menu</span> <svg viewBox="0 0 17 14" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" aria-hidden="true"><path d="M1 1h15M1 7h15M1 13h15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></button><div class="w-full hidden md:block md:w-auto" id="navbar-default"><ul class="flex flex-col p-4 bg-bg-100 border border-bg-200 gap-4 md:bg-transparent md:border-0 md:flex-row md:mt-0 md:p-0 md:space-x-8 mt-4 rounded-lg rtl:space-x-reverse"><li class><a href="/blog"><div class="font-bold text-text-500 block decoration-4 decoration-accent-500 hover:text-accent-700 underline underline-offset-8">Blog</div></a></li><li class><a href="/speaking"><div class="text-text-500 block hover:text-accent-700 font-medium">Speaking</div></a></li><li class><a href="/about"><div class="text-text-500 block hover:text-accent-700 font-medium">About</div></a></li><li><a href="#" class="flex group h-8 relative w-8" id="theme-switch"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img" class="h-8 w-8 absolute hidden group-hover:text-slate-300 hover:animate-wiggle text-slate-400" id="moon" title="Switch theme to light mode"><title>Switch theme to light mode</title><path d="M21.64 13a1 1 0 0 0-1.05-.14a8.05 8.05 0 0 1-3.37.73a8.15 8.15 0 0 1-8.14-8.1a8.59 8.59 0 0 1 .25-2A1 1 0 0 0 8 2.36a10.14 10.14 0 1 0 14 11.69a1 1 0 0 0-.36-1.05m-9.5 6.69A8.14 8.14 0 0 1 7.08 5.22v.27a10.15 10.15 0 0 0 10.14 10.14a9.79 9.79 0 0 0 2.1-.22a8.11 8.11 0 0 1-7.18 4.32Z" fill="currentColor"/></svg> <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img" class="h-8 w-8 absolute hidden group-hover:text-yellow-600 hover:animate-spin text-yellow-500" id="sun" title="Switch theme to dark mode"><title>Switch theme to dark mode</title><path d="m5.64 17l-.71.71a1 1 0 0 0 0 1.41a1 1 0 0 0 1.41 0l.71-.71A1 1 0 0 0 5.64 17M5 12a1 1 0 0 0-1-1H3a1 1 0 0 0 0 2h1a1 1 0 0 0 1-1m7-7a1 1 0 0 0 1-1V3a1 1 0 0 0-2 0v1a1 1 0 0 0 1 1M5.64 7.05a1 1 0 0 0 .7.29a1 1 0 0 0 .71-.29a1 1 0 0 0 0-1.41l-.71-.71a1 1 0 0 0-1.41 1.41Zm12 .29a1 1 0 0 0 .7-.29l.71-.71a1 1 0 1 0-1.41-1.41l-.64.71a1 1 0 0 0 0 1.41a1 1 0 0 0 .66.29ZM21 11h-1a1 1 0 0 0 0 2h1a1 1 0 0 0 0-2m-9 8a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1a1 1 0 0 0-1-1m6.36-2A1 1 0 0 0 17 18.36l.71.71a1 1 0 0 0 1.41 0a1 1 0 0 0 0-1.41ZM12 6.5a5.5 5.5 0 1 0 5.5 5.5A5.51 5.51 0 0 0 12 6.5m0 9a3.5 3.5 0 1 1 3.5-3.5a3.5 3.5 0 0 1-3.5 3.5" fill="currentColor"/></svg></a></li></ul></div></div></nav></header><main class="min-h-screen pb-32"><div class="bg-bg-500 relative z-40 pb-16"><div class="mx-auto max-w-screen-xl px-8 py-16"><h1 class="font-bold text-text-500 leading-normal md:text-5xl text-4xl">Invite-only microsites with Next.js and AirTable</h1><h2 class="text-text-400 font-medium md:text-2xl/relaxed mt-4 text-xl/relaxed">Build an invite-only website with Next.js, AirTable, custom React hooks, and Vercel deploy</h2></div><img alt decoding="async" height="200" loading="lazy" src="/_astro/invite-only-microsites-with-nextjs-and-airtable.VI7z7WA0_x42Mw.webp" width="1280" class="w-full object-cover h-[300px] shadow-xl sm:h-[500px] xl:max-w-screen-xl xl:mx-auto xl:rounded-xl"><div class="mx-auto max-w-screen-xl px-8 py-8"><div class="gap-4 grid grid-cols-1 lg:grid-cols-10 mt-8"><aside class="flex flex-wrap border-b border-text-100 col-span-10 gap-8 gap-x-16 lg:border-0 lg:col-span-3 lg:flex-col lg:mb-0 lg:pb-0 mb-8 pb-8"><div><dt class="text-text-400 font-bold"><span class="gap-2 inline-flex self-center align-baseline items-baseline"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img" class="h-4 w-4"><title>User Icon</title><path d="M15.71 12.71a6 6 0 1 0-7.42 0a10 10 0 0 0-6.22 8.18a1 1 0 0 0 2 .22a8 8 0 0 1 15.9 0a1 1 0 0 0 1 .89h.11a1 1 0 0 0 .88-1.1a10 10 0 0 0-6.25-8.19M12 12a4 4 0 1 1 4-4a4 4 0 0 1-4 4" fill="currentColor"/></svg> <span>Author</span></span></dt><dd class="text-text-400 text-lg font-normal"><a href="/about" class="gap-2 inline-flex hover:text-primary-600 hover:underline items-center"><img alt="Luciano Mammino's profile picture" decoding="async" height="32" loading="lazy" src="/_astro/profile-picture.2yBlAlPA_25LN8k.webp" width="32" class="h-8 w-8 rounded-full"> <span>Luciano Mammino</span></a></dd></div><div><dt class="text-text-400 font-bold"><span class="gap-2 inline-flex self-center align-baseline items-baseline"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img" class="h-4 w-4"><title>Calendar Icon</title><path d="M12 19a1 1 0 1 0-1-1a1 1 0 0 0 1 1m5 0a1 1 0 1 0-1-1a1 1 0 0 0 1 1m0-4a1 1 0 1 0-1-1a1 1 0 0 0 1 1m-5 0a1 1 0 1 0-1-1a1 1 0 0 0 1 1m7-12h-1V2a1 1 0 0 0-2 0v1H8V2a1 1 0 0 0-2 0v1H5a3 3 0 0 0-3 3v14a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3m1 17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-9h16Zm0-11H4V6a1 1 0 0 1 1-1h1v1a1 1 0 0 0 2 0V5h8v1a1 1 0 0 0 2 0V5h1a1 1 0 0 1 1 1ZM7 15a1 1 0 1 0-1-1a1 1 0 0 0 1 1m0 4a1 1 0 1 0-1-1a1 1 0 0 0 1 1" fill="currentColor"/></svg> <span>Published</span></span></dt><dd class="text-text-400 text-lg font-normal"><div><time datetime="2022-08-09T07:40:00.000Z" title="2022-08-09T07:40:00.000Z">2022-08-09 07:40</time></div></dd></div><div><dt class="text-text-400 font-bold"><span class="gap-2 inline-flex self-center align-baseline items-baseline"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img" class="h-4 w-4"><title>Tag Icon</title><path d="M7.5 6A1.5 1.5 0 1 0 9 7.5A1.5 1.5 0 0 0 7.5 6m13.62 4.71l-8.41-8.42A1 1 0 0 0 12 2H3a1 1 0 0 0-1 1v9a1 1 0 0 0 .29.71l8.42 8.41a3 3 0 0 0 4.24 0L21.12 15a3 3 0 0 0 0-4.24Zm-1.41 2.82l-6.18 6.17a1 1 0 0 1-1.41 0L4 11.59V4h7.59l8.12 8.12a1 1 0 0 1 .29.71a1 1 0 0 1-.29.7" fill="currentColor"/></svg> <span>Topics</span></span></dt><dd class="text-text-400 text-lg font-normal"><ul class="flex flex-wrap gap-1"><li><a href="/tag/javascript" class="text-text-400 hover:text-text-500 py-1 bg-bg-400 hover:bg-bg-600 inline-block mb-2 mr-2 px-2 rounded-lg">javascript</a></li><li><a href="/tag/typescript" class="text-text-400 hover:text-text-500 py-1 bg-bg-400 hover:bg-bg-600 inline-block mb-2 mr-2 px-2 rounded-lg">typescript</a></li><li><a href="/tag/react" class="text-text-400 hover:text-text-500 py-1 bg-bg-400 hover:bg-bg-600 inline-block mb-2 mr-2 px-2 rounded-lg">react</a></li><li><a href="/tag/nextjs" class="text-text-400 hover:text-text-500 py-1 bg-bg-400 hover:bg-bg-600 inline-block mb-2 mr-2 px-2 rounded-lg">nextjs</a></li><li><a href="/tag/jwt" class="text-text-400 hover:text-text-500 py-1 bg-bg-400 hover:bg-bg-600 inline-block mb-2 mr-2 px-2 rounded-lg">jwt</a></li></ul></dd></div></aside><div class="col-span-7"><article class="text-text-400 [&#38;>p:first-of-type]:text-lg/relaxed [&#38;>p:first-of-type]:text-text-700 hover:prose-a:decoration-primary-500 hover:prose-a:text-primary-500 lg:[&#38;>p:first-of-type]:text-2xl/relaxed lg:prose-xl md:[&#38;>p:first-of-type]:text-xl/relaxed md:prose-lg prose prose-a:decoration-text-200 prose-a:text-primary-700 prose-a:underline-offset-4 prose-blockquote:text-text-500 prose-code:text-text-500 prose-em:text-text-500 prose-figcaption:text-text-400 prose-figure:text-text-40 prose-h1:text-text-500 prose-h2:text-text-500 prose-h3:text-text-500 prose-h4:text-text-500 prose-hr:text-text-300 prose-img:text-text-400 prose-li:text-text-400 prose-ol:text-text-400 prose-pre:text-text-400 prose-strong:text-text-500 prose-table:text-text-400 prose-td:text-text-400 prose-th:text-text-500 prose-thead:text-text-500 prose-tr:text-text-400 prose-ul:text-text-400 prose-video:text-text-400 undefined"><p>I recently needed to create an invite-only Next.js-powered microsite (for my wedding 🌸) and in this article I’m going to show you how I went about creating invite codes and how I implemented code validation in the app, using Next.js API endpoints and <a href="https://airtable.com/invite/r/fQpMoVmw">AirTable</a> as a lightweight backend.</p><h2 id="the-use-case-and-the-tech-stack">The use case and the tech stack</h2><p>24 June 2022 was the best day of my life.</p><p>Seriously, I got married with the human being I love the most and everything was just perfect.</p><p>But we are not here to talk about my wedding, right?</p><p>Well, we kinda are, but in a nerdy kind of way that only software engineers can (hopefully) appreciate. OK, don’t tell my wife I said that… 🤫</p><p>Specifically, we will discuss how to implement an invite-only microsite to share information with all the people invited to a private event.</p><p>Just to put things in context, let’s wear the PM hat for a second, and let’s discuss what kind of requirements did I impose on myself while building my wedding website:</p><ul><li>I wanted to be able to iterate quickly, mostly focusing on content and design, not much on infrastructure.</li><li>I wanted to build a simple solution that would be easy to host, maintain and update.</li><li>I wanted to have a very lightweight backend, possibly something managed.</li><li>Even better if I could give access to the data storage to someone else (my wife) so that we could collaborate on managing the data about the guests.</li><li>If I could host everything very cheaply (if not even freely), that would be great.</li></ul><p>For all the reasons above I settled for adopting the following pieces of tech:</p><ul><li><strong>Next.js</strong> for building a statically rendered frontend and the backend APIs</li><li>A private <strong>GitHub</strong> repository for managing the code of the Next.js app</li><li><strong>Vercel</strong> for hosting the project</li><li><strong>AirTable</strong> to store and manage all the data (invite codes, guests, rsvp, etc.)</li></ul><p>Keep in mind that Next.js is free and open source, GitHub can be used for free (even if you want to keep your repo private), and Vercel and AirTable have both generous free plans that are more than enough for this kind of use case.</p><p>With the stack above I ended up spending 0 money and I was able to complete the project in a couple of weekends! 🤑👌</p><h2 id="making-a-nextjs-site-private">Making a Next.js site private</h2><p>On top of the requirements discussed above, my wedding website had 2 additional constraints:</p><ul><li>Every different guest should see something different (the website would look like a custom invite letter for them).</li><li>People without an invite code should not be able to access any content on the website.</li></ul><p>The following illustration shows how I went about making that happen in the context of a React SPA (Single Page Application):</p><p><img alt="Illustration showing how to make a React SPA built with Next.js invite-only using AirTable as a data storage" decoding="async" height="698" loading="lazy" src="/_astro/how-to-make-a-react-spa-invite-only.eCp15P-i_1XHGCq.webp" width="1000"></p><p>Please boost my ego for a second, isn’t this a beautiful illustration? 😜</p><p>OK, let’s be serious:</p><ol><li>The user loads the application by visiting the website with a personal invite code (passed as a query string parameter). When the page is loaded the React application starts on the client side. The app displays only a loading spinner at this stage.</li><li>The first thing that the application does is to read the invite code from the URL. At this point, it can call the backend (a Next.js API endpoint running on Vercel) to get the invite code validated. In turn, the backend requests the data storage (an AirTable spreadsheet) to check if the code exists (in which case it’s valid). If the code exists, the backend also returns the custom information associated with that invite code. For instance, the name of the invited person.</li><li>If the code is valid, the application has all the information to render the private website.</li><li>If it is not valid, an error message is displayed instead.</li></ol><h2 id="lets-build-an-invite-only-website">Let’s build an invite-only website!</h2><p>No, I am not going to show you my private wedding website (sorry, not sorry)!</p><p>Instead, we are going to build a more fictional example in this article: an invite-only website for a <strong>secret pizza party</strong>. Here’s what different invites will look like:</p><p><img alt="Examples of different invites on our website" decoding="async" height="718" loading="lazy" src="/_astro/sample-invites-pizza-party.780C3kt3_Z25OqI1.webp" width="2000"></p><p>As you can see from the picture, every guest (with a valid invite code) will get a custom invite page with their name, favorite color, etc.</p><p>If you want to see a preview, check out the following links:</p><ul><li><a href="https://secret-pizza-party.vercel.app/?code=14b25700-fe5b-45e8-a9be-4863b6239fcf">Leonardo’s invite</a></li><li><a href="https://secret-pizza-party.vercel.app/?code=ce7d5886-2166-4aee-8038-548f68b9739d">Michelangelo’s invite</a></li><li><a href="https://secret-pizza-party.vercel.app/?code=ef7ab7b7-33d5-43b9-ad73-e73bb8fd8e77">Raffaello’s invite</a></li><li><a href="https://secret-pizza-party.vercel.app/?code=b0cbb4a4-8a31-4bc1-bee9-d6fe39c1a6b3">Donatello’s invite</a></li></ul><p>Of course, if the invite code is missing or if it’s not valid, an <a href="https://secret-pizza-party.vercel.app/?invite=invalid">error page</a> is displayed.</p><p>If you are curious to take a look at the code, it’s all <a href="https://github.com/lmammino/secret-pizza-party">public and hosted on GitHub</a> (did you give it a star already?)…</p><h2 id="handling-sensitive-data-in-a-spa">Handling sensitive data in a SPA</h2><p>Sorry, I have to pause here for a second because before we get our hands dirty, we need to talk about… <strong>Security</strong>! Security always comes first! 👷‍♀️</p><p>It’s important to keep in mind that, with this particular design, all the UI logic and the content are already available in the JavaScript bundle representing the Single Page Application.</p><p>On top of that, the website is hosted on Vercel, so it’s publicly available on the internet.</p><p>Even if we end up displaying the “invalid invite” message to the user, a crafty user could still download all the frontend JavaScript code for our application and understand what should have been visualized with a valid invite.</p><p>Let me show you what I mean with a picture:</p><p><img alt="Disclosing sensitive information in the JavaScript bundled code" decoding="async" height="1261" loading="lazy" src="/_astro/disclosing-sensitive-information-in-bundled-code.k90IBRWN_8TfFj.webp" width="2118"></p><p>In a dummy version of this website, I was keeping all the sensitive data (for instance here, the date and place of the event) hardcoded in my JSX code. This means that an experienced user, even if they don’t have a valid invite code, could technically have a peek at the JavaScript bundle and extrapolate a lot of sensitive information.</p><p>For this reason, it’s important to keep any sensitive information outside the frontend code. In the case of a wedding website, you probably wouldn’t want to disclose to the entire world things like the event date, the location, emergency phone numbers, etc.</p><p>All the data that we need to keep private (only available to someone with a valid invite code) must be fetched doing an API call to the backend.</p><p>In a way, we can imagine the invite code as an API key that gives people access not just to the website, but also to all the sensitive data that the website will display.</p><p>Of course, make sure to keep your repository private, otherwise, that might become another way to access sensitive information embedded in your API code…</p><p>Finally, it’s also important that your user understand that they shouldn’t be sharing their unique URL with other people. So make sure to warn them when you send them the invite URL.</p><p>In summary, here are some good security rules we will abide by:</p><ol><li>The website is public</li><li>We are enforcing access control from the client side</li><li>The client-side cannot be trusted (all its code is publicly accessible)</li><li>A backend needs to be used to validate the code and return any sensitive information that needs to be accessible only with a valid invite code.</li><li>For extra security, keep your repo private and make sure your user won’t share their invite URL with other people!</li></ol><h2 id="generating-and-storing-invite-codes">Generating and storing invite codes</h2><p>We said we are going to be using <a href="https://airtable.com/invite/r/fQpMoVmw">AirTable</a> as storage for invite code and related information.</p><p>AirTable is a SaaS that allows you to easily manage different kinds of datasets. You can do a lot through its web interface, but you can also use the data programmatically, turning it into a convenience database for simple types of applications.</p><p>For this particular use case, Airtable offers a <a href="https://support.airtable.com/hc/en-us/articles/203313985-Public-REST-API">public REST API</a> and SDKs in various programming languages, including <a href="https://github.com/airtable/airtable.js">JavaScript</a>.</p><p>We can start by creating a new <em>base</em> (which is kinda a workspace in AirTable lingo) and create a grid data view into it.</p><p>This first data table will contain all our invite codes, so let’s call it <strong>invites</strong>:</p><p><img alt="An example of how we could structure the AirTable table" decoding="async" height="334" loading="lazy" src="/_astro/airtable-sample-table.BVDE-Cdk_Z1aC13l.webp" width="1270"></p><p>As displayed in the picture above we are adding a few fields there:</p><ul><li><code>invite</code>: a UUID that represents the invite code</li><li><code>name</code>: the name of the invited guest</li><li><code>favouriteColor</code>the favorite color of the guest</li><li><code>weapon</code>the weapons of the guest (small note: in real life I am not pro weapons, but if you haven’t got it yet, we are talking about Mutant Ninja Turtles™️ here… 😝)</li></ul><p>This makes sense for our fictional example. In a more generic use case, you’ll be adding here all the pieces of information that are unique for every single guest. Note that on this website we also have a mini RSVP form. This means that we will be able to collect some data from the users. This is also something that we will be storing in AirTable.</p><details style="margin-top:1em"><summary>Are you following along and want an easy way to import this table into your Airtable base? (expand here)</summary><div style="background:#eee;margin-top:1em;padding:1em;border:2px dotted #ccc;border-radius:10px"><p>Airtable allows to import data into a base from a CSV, so here’s my example data in CSV format:</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span>invite,name,favouriteColor,weapon</span></span>
<span class="line"><span>14b25700-fe5b-45e8-a9be-4863b6239fcf,Leonardo,blue,Twin Katana</span></span>
<span class="line"><span>ce7d5886-2166-4aee-8038-548f68b9739d,Michelangelo,orange,Nunchaku</span></span>
<span class="line"><span>ef7ab7b7-33d5-43b9-ad73-e73bb8fd8e77,Raffaello,red,Twin Sai</span></span>
<span class="line"><span>b0cbb4a4-8a31-4bc1-bee9-d6fe39c1a6b3,Donatello,purple,Bo</span></span></code></pre></div></details><h2 id="reading-invite-codes-using-the-airtable-sdk">Reading invite codes using the AirTable SDK</h2><blockquote><p><strong>Note</strong>: from this point I will assume that you have already scaffolded your Next.js application. If you need help doing that you can check out <a href="https://nextjs.org/learn/basics/create-nextjs-app">The official Next.js docs</a> or just run the following command:</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#b392f0">npx</span><span style="color:#9ecbff"> create-next-app@latest</span><span style="color:#79b8ff"> --typescript</span><span style="color:#79b8ff"> --use-npm</span></span></code></pre><p>Also note that, at the time of writing, I am using <strong>Next.js version 12.2</strong>. If you are reading this in a distant future, you might have to change something in the following code examples!</p></blockquote><p>Because we are using TypeScript, the first thing that we want to do is spend a few minutes to think how to represent our invites.</p><p>The easiest thing I could come up with was to create a file called <code>types/invite.ts</code> with the following definition:</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#f97583">export</span><span style="color:#f97583"> interface</span><span style="color:#b392f0"> Invite</span><span style="color:#e1e4e8"> {</span></span>
<span class="line"><span style="color:#ffab70">  code</span><span style="color:#f97583">:</span><span style="color:#79b8ff"> string</span></span>
<span class="line"><span style="color:#ffab70">  name</span><span style="color:#f97583">:</span><span style="color:#79b8ff"> string</span></span>
<span class="line"><span style="color:#ffab70">  favouriteColor</span><span style="color:#f97583">:</span><span style="color:#79b8ff"> string</span></span>
<span class="line"><span style="color:#ffab70">  weapon</span><span style="color:#f97583">:</span><span style="color:#79b8ff"> string</span></span>
<span class="line"><span style="color:#ffab70">  coming</span><span style="color:#f97583">?:</span><span style="color:#79b8ff"> boolean</span></span>
<span class="line"><span style="color:#e1e4e8">}</span></span></code></pre><p>This should probably be enough for our use case.</p><p>Now is the time to start writing some code to interact with the data on our AirTable <em>base</em>.</p><p>To do that, the first thing we need to install the <code>airtable</code> package:</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#b392f0">npm</span><span style="color:#9ecbff"> i</span><span style="color:#79b8ff"> --save</span><span style="color:#9ecbff"> airtable</span></span></code></pre><p>We will also need to grab our Airtable API KEY from the <a href="https://airtable.com/account">AirTable account page</a> and the <em>base ID</em> from the <a href="https://airtable.com/api">API page</a> (select your workspace and the API docs should show you the <em>base ID</em> in the introduction section).</p><p>For development convenience we are going to store these two variables as environment variables:</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#f97583">export</span><span style="color:#e1e4e8"> AIRTABLE_API_KEY</span><span style="color:#f97583">=</span><span style="color:#9ecbff">"put your api key here"</span></span>
<span class="line"><span style="color:#f97583">export</span><span style="color:#e1e4e8"> AIRTABLE_BASE_ID</span><span style="color:#f97583">=</span><span style="color:#9ecbff">"put your base id here"</span></span></code></pre><p>If you go back to the API docs, you might appreciate that the docs are automatically generated for your workspace. You should see a section called “invites table” describing all the fields available in our grid!</p><p><img alt="Example of documentation page for AirTable" decoding="async" height="1333" loading="lazy" src="/_astro/airtable-api-documentation-page.wTab5fBV_roLJa.webp" width="2552"></p><p>Isn’t this an awesome way to provide documentation?! And you can even get a bunch of <code>curl</code> and JavaScript code examples.</p><p>What we want to do right now is to be able to retrieve a record by invite code. One way to do that is to list all the records and use a filter to try to match based on our invite code field. We can visit the section <em>List records</em> to have a feeling for how we could do that. If we switch to the JavaScript code example we will see something like this:</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#f97583">var</span><span style="color:#e1e4e8"> Airtable </span><span style="color:#f97583">=</span><span style="color:#b392f0"> require</span><span style="color:#e1e4e8">(</span><span style="color:#9ecbff">'airtable'</span><span style="color:#e1e4e8">)</span></span>
<span class="line"><span style="color:#f97583">var</span><span style="color:#e1e4e8"> base </span><span style="color:#f97583">=</span><span style="color:#f97583"> new</span><span style="color:#b392f0"> Airtable</span><span style="color:#e1e4e8">({ apiKey: </span><span style="color:#9ecbff">'YOUR_API_KEY'</span><span style="color:#e1e4e8"> }).</span><span style="color:#b392f0">base</span><span style="color:#e1e4e8">(</span><span style="color:#9ecbff">'YOUR_BASE_ID'</span><span style="color:#e1e4e8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#b392f0">base</span><span style="color:#e1e4e8">(</span><span style="color:#9ecbff">'invites'</span><span style="color:#e1e4e8">)</span></span>
<span class="line"><span style="color:#e1e4e8">  .</span><span style="color:#b392f0">select</span><span style="color:#e1e4e8">({</span></span>
<span class="line"><span style="color:#6a737d">    // Selecting the first 3 records in Grid view:</span></span>
<span class="line"><span style="color:#e1e4e8">    maxRecords: </span><span style="color:#79b8ff">3</span><span style="color:#e1e4e8">,</span></span>
<span class="line"><span style="color:#e1e4e8">    view: </span><span style="color:#9ecbff">'Grid view'</span><span style="color:#e1e4e8">,</span></span>
<span class="line"><span style="color:#e1e4e8">  })</span></span>
<span class="line"><span style="color:#e1e4e8">  .</span><span style="color:#b392f0">eachPage</span><span style="color:#e1e4e8">(</span></span>
<span class="line"><span style="color:#f97583">    function</span><span style="color:#b392f0"> page</span><span style="color:#e1e4e8">(</span><span style="color:#ffab70">records</span><span style="color:#e1e4e8">, </span><span style="color:#ffab70">fetchNextPage</span><span style="color:#e1e4e8">) {</span></span>
<span class="line"><span style="color:#6a737d">      // This function (`page`) will get called for each page of records.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#e1e4e8">      records.</span><span style="color:#b392f0">forEach</span><span style="color:#e1e4e8">(</span><span style="color:#f97583">function</span><span style="color:#e1e4e8"> (</span><span style="color:#ffab70">record</span><span style="color:#e1e4e8">) {</span></span>
<span class="line"><span style="color:#e1e4e8">        console.</span><span style="color:#b392f0">log</span><span style="color:#e1e4e8">(</span><span style="color:#9ecbff">'Retrieved'</span><span style="color:#e1e4e8">, record.</span><span style="color:#b392f0">get</span><span style="color:#e1e4e8">(</span><span style="color:#9ecbff">'invite'</span><span style="color:#e1e4e8">))</span></span>
<span class="line"><span style="color:#e1e4e8">      })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a737d">      // To fetch the next page of records, call `fetchNextPage`.</span></span>
<span class="line"><span style="color:#6a737d">      // If there are more records, `page` will get called again.</span></span>
<span class="line"><span style="color:#6a737d">      // If there are no more records, `done` will get called.</span></span>
<span class="line"><span style="color:#b392f0">      fetchNextPage</span><span style="color:#e1e4e8">()</span></span>
<span class="line"><span style="color:#e1e4e8">    },</span></span>
<span class="line"><span style="color:#f97583">    function</span><span style="color:#b392f0"> done</span><span style="color:#e1e4e8">(</span><span style="color:#ffab70">err</span><span style="color:#e1e4e8">) {</span></span>
<span class="line"><span style="color:#f97583">      if</span><span style="color:#e1e4e8"> (err) {</span></span>
<span class="line"><span style="color:#e1e4e8">        console.</span><span style="color:#b392f0">error</span><span style="color:#e1e4e8">(err)</span></span>
<span class="line"><span style="color:#f97583">        return</span></span>
<span class="line"><span style="color:#e1e4e8">      }</span></span>
<span class="line"><span style="color:#e1e4e8">    },</span></span>
<span class="line"><span style="color:#e1e4e8">  )</span></span></code></pre><p>OK Airtable, you did such a great job with the auto-generated docs, but come on! What kind of JavaScript is this?! Still using <code>var</code>, <em>CommonJS</em>, and <em>callbacks</em>? 😢</p><p>Well, I guess we will need to roll up our sleeves and do a bit of extra work to make this nice and modern…</p><p>Let’s start by creating a new file called <code>utils/airtable.ts</code> and let’s create a helper function there to get an invite by id:</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#f97583">import</span><span style="color:#e1e4e8"> Airtable </span><span style="color:#f97583">from</span><span style="color:#9ecbff"> 'airtable'</span></span>
<span class="line"><span style="color:#f97583">import</span><span style="color:#e1e4e8"> { Invite } </span><span style="color:#f97583">from</span><span style="color:#9ecbff"> '../types/invite'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a737d">// make sure all the necessary env vars are set</span></span>
<span class="line"><span style="color:#f97583">if</span><span style="color:#e1e4e8"> (</span><span style="color:#f97583">!</span><span style="color:#e1e4e8">process.env.</span><span style="color:#79b8ff">AIRTABLE_API_KEY</span><span style="color:#e1e4e8">) {</span></span>
<span class="line"><span style="color:#f97583">  throw</span><span style="color:#f97583"> new</span><span style="color:#b392f0"> Error</span><span style="color:#e1e4e8">(</span><span style="color:#9ecbff">'AIRTABLE_API_KEY is not set'</span><span style="color:#e1e4e8">)</span></span>
<span class="line"><span style="color:#e1e4e8">}</span></span>
<span class="line"><span style="color:#f97583">if</span><span style="color:#e1e4e8"> (</span><span style="color:#f97583">!</span><span style="color:#e1e4e8">process.env.</span><span style="color:#79b8ff">AIRTABLE_BASE_ID</span><span style="color:#e1e4e8">) {</span></span>
<span class="line"><span style="color:#f97583">  throw</span><span style="color:#f97583"> new</span><span style="color:#b392f0"> Error</span><span style="color:#e1e4e8">(</span><span style="color:#9ecbff">'AIRTABLE_BASE_ID is not set'</span><span style="color:#e1e4e8">)</span></span>
<span class="line"><span style="color:#e1e4e8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a737d">// create a new Airtable client and gets a reference to the</span></span>
<span class="line"><span style="color:#6a737d">// airtable base containing our invites</span></span>
<span class="line"><span style="color:#f97583">const</span><span style="color:#79b8ff"> airtable</span><span style="color:#f97583"> =</span><span style="color:#f97583"> new</span><span style="color:#b392f0"> Airtable</span><span style="color:#e1e4e8">({ apiKey: process.env.</span><span style="color:#79b8ff">AIRTABLE_API_KEY</span><span style="color:#e1e4e8"> })</span></span>
<span class="line"><span style="color:#f97583">const</span><span style="color:#79b8ff"> base</span><span style="color:#f97583"> =</span><span style="color:#e1e4e8"> airtable.</span><span style="color:#b392f0">base</span><span style="color:#e1e4e8">(process.env.</span><span style="color:#79b8ff">AIRTABLE_BASE_ID</span><span style="color:#e1e4e8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a737d">// get an invite by invite code (promisified)</span></span>
<span class="line"><span style="color:#f97583">export</span><span style="color:#f97583"> function</span><span style="color:#b392f0"> getInvite</span><span style="color:#e1e4e8">(</span><span style="color:#ffab70">inviteCode</span><span style="color:#f97583">:</span><span style="color:#79b8ff"> string</span><span style="color:#e1e4e8">)</span><span style="color:#f97583">:</span><span style="color:#b392f0"> Promise</span><span style="color:#e1e4e8">&#x3C;</span><span style="color:#b392f0">Invite</span><span style="color:#e1e4e8">> {</span></span>
<span class="line"><span style="color:#f97583">  return</span><span style="color:#f97583"> new</span><span style="color:#79b8ff"> Promise</span><span style="color:#e1e4e8">((</span><span style="color:#ffab70">resolve</span><span style="color:#e1e4e8">, </span><span style="color:#ffab70">reject</span><span style="color:#e1e4e8">) </span><span style="color:#f97583">=></span><span style="color:#e1e4e8"> {</span></span>
<span class="line"><span style="color:#b392f0">    base</span><span style="color:#e1e4e8">(</span><span style="color:#9ecbff">'invites'</span><span style="color:#e1e4e8">)</span></span>
<span class="line"><span style="color:#6a737d">      // runs a query on the `invites` table</span></span>
<span class="line"><span style="color:#e1e4e8">      .</span><span style="color:#b392f0">select</span><span style="color:#e1e4e8">({</span></span>
<span class="line"><span style="color:#e1e4e8">        filterByFormula: </span><span style="color:#9ecbff">`{invite} = ${</span><span style="color:#b392f0">escape</span><span style="color:#9ecbff">(</span><span style="color:#e1e4e8">inviteCode</span><span style="color:#9ecbff">)</span><span style="color:#9ecbff">}`</span><span style="color:#e1e4e8">,</span></span>
<span class="line"><span style="color:#e1e4e8">        maxRecords: </span><span style="color:#79b8ff">1</span><span style="color:#e1e4e8">,</span></span>
<span class="line"><span style="color:#e1e4e8">      })</span></span>
<span class="line"><span style="color:#6a737d">      // reads the first page of results</span></span>
<span class="line"><span style="color:#e1e4e8">      .</span><span style="color:#b392f0">firstPage</span><span style="color:#e1e4e8">((</span><span style="color:#ffab70">err</span><span style="color:#e1e4e8">, </span><span style="color:#ffab70">records</span><span style="color:#e1e4e8">) </span><span style="color:#f97583">=></span><span style="color:#e1e4e8"> {</span></span>
<span class="line"><span style="color:#f97583">        if</span><span style="color:#e1e4e8"> (err) {</span></span>
<span class="line"><span style="color:#6a737d">          // propagate errors</span></span>
<span class="line"><span style="color:#e1e4e8">          console.</span><span style="color:#b392f0">error</span><span style="color:#e1e4e8">(err)</span></span>
<span class="line"><span style="color:#f97583">          return</span><span style="color:#b392f0"> reject</span><span style="color:#e1e4e8">(err)</span></span>
<span class="line"><span style="color:#e1e4e8">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a737d">        // if the record could not be found</span></span>
<span class="line"><span style="color:#6a737d">        // we consider it an error</span></span>
<span class="line"><span style="color:#f97583">        if</span><span style="color:#e1e4e8"> (</span><span style="color:#f97583">!</span><span style="color:#e1e4e8">records </span><span style="color:#f97583">||</span><span style="color:#e1e4e8"> records.</span><span style="color:#79b8ff">length</span><span style="color:#f97583"> ===</span><span style="color:#79b8ff"> 0</span><span style="color:#e1e4e8">) {</span></span>
<span class="line"><span style="color:#f97583">          return</span><span style="color:#b392f0"> reject</span><span style="color:#e1e4e8">(</span><span style="color:#f97583">new</span><span style="color:#b392f0"> Error</span><span style="color:#e1e4e8">(</span><span style="color:#9ecbff">'Invite not found'</span><span style="color:#e1e4e8">))</span></span>
<span class="line"><span style="color:#e1e4e8">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a737d">        // otherwise we create an invite object from the first record</span></span>
<span class="line"><span style="color:#6a737d">        // (there should be only one with the give code) and return it</span></span>
<span class="line"><span style="color:#f97583">        const</span><span style="color:#79b8ff"> result</span><span style="color:#f97583"> =</span><span style="color:#e1e4e8"> {</span></span>
<span class="line"><span style="color:#e1e4e8">          code: </span><span style="color:#b392f0">String</span><span style="color:#e1e4e8">(records[</span><span style="color:#79b8ff">0</span><span style="color:#e1e4e8">].fields.invite),</span></span>
<span class="line"><span style="color:#e1e4e8">          name: </span><span style="color:#b392f0">String</span><span style="color:#e1e4e8">(records[</span><span style="color:#79b8ff">0</span><span style="color:#e1e4e8">].fields.name),</span></span>
<span class="line"><span style="color:#e1e4e8">          favouriteColor: </span><span style="color:#b392f0">String</span><span style="color:#e1e4e8">(records[</span><span style="color:#79b8ff">0</span><span style="color:#e1e4e8">].fields.favouriteColor),</span></span>
<span class="line"><span style="color:#e1e4e8">          weapon: </span><span style="color:#b392f0">String</span><span style="color:#e1e4e8">(records[</span><span style="color:#79b8ff">0</span><span style="color:#e1e4e8">].fields.weapon),</span></span>
<span class="line"><span style="color:#e1e4e8">          coming:</span></span>
<span class="line"><span style="color:#f97583">            typeof</span><span style="color:#e1e4e8"> records[</span><span style="color:#79b8ff">0</span><span style="color:#e1e4e8">].fields.coming </span><span style="color:#f97583">===</span><span style="color:#9ecbff"> 'undefined'</span></span>
<span class="line"><span style="color:#f97583">              ?</span><span style="color:#79b8ff"> undefined</span></span>
<span class="line"><span style="color:#f97583">              :</span><span style="color:#e1e4e8"> records[</span><span style="color:#79b8ff">0</span><span style="color:#e1e4e8">].fields.coming </span><span style="color:#f97583">===</span><span style="color:#9ecbff"> 'yes'</span><span style="color:#e1e4e8">,</span></span>
<span class="line"><span style="color:#e1e4e8">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#b392f0">        resolve</span><span style="color:#e1e4e8">(result)</span></span>
<span class="line"><span style="color:#e1e4e8">      })</span></span>
<span class="line"><span style="color:#e1e4e8">  })</span></span>
<span class="line"><span style="color:#e1e4e8">}</span></span></code></pre><p>I left enough comments in the code, that an additional explanation should not be necessary! We are essentially using the <code>airtable</code> SDK and building a nicer promise-based interface to get an invite by invite code.</p><p>Ok, for the eagle-eyed ones, you are probably wondering where the heck is that <code>escape</code> function coming from?! I elided it from the code to keep things simple. The TLDR; is that <strong>it makes things more secure</strong> by reducing the risk of <em>injections</em>.</p><details style="margin-top:1em"><summary>But "the how" needs a bit of a long-ish explanation (expand here if you are curious. Yes, you should be!).</summary><div style="background:#eee;margin-top:1em;padding:1em;border:2px dotted #ccc;border-radius:10px"><p>Every time you use user input to construct some kind of query, your spider senses should be immediately triggered! 🕷</p><p>The invite code is, in fact, user-controlled. It’s part of the query string in the URL. A user can decide to change that and try to see what happens with different values.</p><p>If the user inputs <code>?code=14b25700-fe5b-45e8-a9be-4863b6239fcf</code> as invite code, with a naïve string interpolation, we would be producing the following Airtable formula:</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span>{invite} = '14b25700-fe5b-45e8-a9be-4863b6239fcf'</span></span></code></pre><p>But what if a very evil user tries something like <code>?code=%27%20>%3D%200%20%26%20%27</code> (<code>?code=' >= 0 &#x26; '</code> unencoded)?!</p><p>In this case, we end up constructing the following Airtable formula:</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span>{invite} = '' >= 0 &#x26; ''</span></span></code></pre><p>Which always evaluates to <code>1</code> (<code>true</code>) for every record in the table! So this very evil user is now accessing your private website without having to know a valid code. They will just get the code of the first record that Airtable matches in the table! If you don’t believe me you can try this attack by yourself <a href="https://secret-pizza-party-fgpypfb66-lmammino.vercel.app/?code=%27%20%3E%3D%200%20%26%20%27">with this link</a> (running on a <a href="https://github.com/lmammino/secret-pizza-party/tree/vulnerable">vulnerable branch</a> of the app where we don’t perform the escape).</p><p>This is like <a href="https://owasp.org/www-community/attacks/SQL_Injection">SQL injections</a> but for Airtable filter formulas! 😱</p><p>The <code>escape</code> function, allows us to try to sanitize user input and escape dangerous characters like <code>'</code> and <code>"</code> which might allow a malicious actor to alter the structure of our filter formula.</p><p>If you are curious this is my basic implementation of the <code>escape</code> function (the one I used in this project), but I have to say I am quite disappointed that Airtable does not provide a built-in utility for this in their SDK and that they don’t warn their users about this threat in their docs… 🙁</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#f97583">function</span><span style="color:#b392f0"> escape</span><span style="color:#e1e4e8">(</span><span style="color:#ffab70">value</span><span style="color:#f97583">:</span><span style="color:#79b8ff"> string</span><span style="color:#e1e4e8">)</span><span style="color:#f97583">:</span><span style="color:#79b8ff"> string</span><span style="color:#e1e4e8"> {</span></span>
<span class="line"><span style="color:#f97583">  if</span><span style="color:#e1e4e8"> (value </span><span style="color:#f97583">===</span><span style="color:#79b8ff"> null</span><span style="color:#f97583"> ||</span><span style="color:#f97583"> typeof</span><span style="color:#e1e4e8"> value </span><span style="color:#f97583">===</span><span style="color:#9ecbff"> 'undefined'</span><span style="color:#e1e4e8">) {</span></span>
<span class="line"><span style="color:#f97583">    return</span><span style="color:#9ecbff"> 'BLANK()'</span></span>
<span class="line"><span style="color:#e1e4e8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#f97583">  if</span><span style="color:#e1e4e8"> (</span><span style="color:#f97583">typeof</span><span style="color:#e1e4e8"> value </span><span style="color:#f97583">===</span><span style="color:#9ecbff"> 'string'</span><span style="color:#e1e4e8">) {</span></span>
<span class="line"><span style="color:#f97583">    const</span><span style="color:#79b8ff"> escapedString</span><span style="color:#f97583"> =</span><span style="color:#e1e4e8"> value</span></span>
<span class="line"><span style="color:#e1e4e8">      .</span><span style="color:#b392f0">replace</span><span style="color:#e1e4e8">(</span><span style="color:#9ecbff">/</span><span style="color:#dbedff">'</span><span style="color:#9ecbff">/</span><span style="color:#f97583">g</span><span style="color:#e1e4e8">, </span><span style="color:#9ecbff">"</span><span style="color:#79b8ff">\\</span><span style="color:#9ecbff">'"</span><span style="color:#e1e4e8">)</span></span>
<span class="line"><span style="color:#e1e4e8">      .</span><span style="color:#b392f0">replace</span><span style="color:#e1e4e8">(</span><span style="color:#9ecbff">/</span><span style="color:#79b8ff">\r</span><span style="color:#9ecbff">/</span><span style="color:#f97583">g</span><span style="color:#e1e4e8">, </span><span style="color:#9ecbff">''</span><span style="color:#e1e4e8">)</span></span>
<span class="line"><span style="color:#e1e4e8">      .</span><span style="color:#b392f0">replace</span><span style="color:#e1e4e8">(</span><span style="color:#9ecbff">/</span><span style="color:#85e89d;font-weight:700">\\</span><span style="color:#9ecbff">/</span><span style="color:#f97583">g</span><span style="color:#e1e4e8">, </span><span style="color:#9ecbff">'</span><span style="color:#79b8ff">\\\\</span><span style="color:#9ecbff">'</span><span style="color:#e1e4e8">)</span></span>
<span class="line"><span style="color:#e1e4e8">      .</span><span style="color:#b392f0">replace</span><span style="color:#e1e4e8">(</span><span style="color:#9ecbff">/</span><span style="color:#79b8ff">\n</span><span style="color:#9ecbff">/</span><span style="color:#f97583">g</span><span style="color:#e1e4e8">, </span><span style="color:#9ecbff">'</span><span style="color:#79b8ff">\\</span><span style="color:#9ecbff">n'</span><span style="color:#e1e4e8">)</span></span>
<span class="line"><span style="color:#e1e4e8">      .</span><span style="color:#b392f0">replace</span><span style="color:#e1e4e8">(</span><span style="color:#9ecbff">/</span><span style="color:#79b8ff">\t</span><span style="color:#9ecbff">/</span><span style="color:#f97583">g</span><span style="color:#e1e4e8">, </span><span style="color:#9ecbff">'</span><span style="color:#79b8ff">\\</span><span style="color:#9ecbff">t'</span><span style="color:#e1e4e8">)</span></span>
<span class="line"><span style="color:#f97583">    return</span><span style="color:#9ecbff"> `'${</span><span style="color:#e1e4e8">escapedString</span><span style="color:#9ecbff">}'`</span></span>
<span class="line"><span style="color:#e1e4e8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#f97583">  if</span><span style="color:#e1e4e8"> (</span><span style="color:#f97583">typeof</span><span style="color:#e1e4e8"> value </span><span style="color:#f97583">===</span><span style="color:#9ecbff"> 'number'</span><span style="color:#e1e4e8">) {</span></span>
<span class="line"><span style="color:#f97583">    return</span><span style="color:#b392f0"> String</span><span style="color:#e1e4e8">(value)</span></span>
<span class="line"><span style="color:#e1e4e8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#f97583">  if</span><span style="color:#e1e4e8"> (</span><span style="color:#f97583">typeof</span><span style="color:#e1e4e8"> value </span><span style="color:#f97583">===</span><span style="color:#9ecbff"> 'boolean'</span><span style="color:#e1e4e8">) {</span></span>
<span class="line"><span style="color:#f97583">    return</span><span style="color:#e1e4e8"> value </span><span style="color:#f97583">?</span><span style="color:#9ecbff"> '1'</span><span style="color:#f97583"> :</span><span style="color:#9ecbff"> '0'</span></span>
<span class="line"><span style="color:#e1e4e8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#f97583">  throw</span><span style="color:#b392f0"> Error</span><span style="color:#e1e4e8">(</span><span style="color:#9ecbff">'Invalid value received'</span><span style="color:#e1e4e8">)</span></span>
<span class="line"><span style="color:#e1e4e8">}</span></span></code></pre><p>Note that <strong>this function does not claim to be perfect or comprehensive</strong>. I haven’t extensively tested it, nor do I know all the bells and whistles of the formula syntax to be able to do that. If you are doing something like this in your code, make sure to test this extensively.</p><p>PS: I nudged Airtable <a href="https://twitter.com/loige/status/1555622372085997569">on Twitter</a> (with no response) and <a href="https://community.airtable.com/t/standard-way-to-prevent-formula-injections-when-using-airtable-as-a-backend-through-sdk/50283">their community forum</a> (well, let’s just say that the thread wasn’t received particularly well by some members of the community and that the conversation derailed a little…). I also reached out to their support channels and, hopefully, this will get somewhere…</p></div></details><p>Now that we have created this utility function, we can use it in an API to be able to provide code validation and invite data to the frontend.</p><h2 id="nextjs-invite-endpoint">Next.js invite endpoint</h2><p>I am generally not a big fan of convention-based frameworks like Next.js. Conventions cannot be comprehensive and sometimes you find yourself trying to adapt your problem to whatever convention the framework is forcing you to use, rather than adopting the optimal approach for the problem at hand.</p><p>In any case, I find that I enjoy using Next.js for small personal projects. The level of productivity is generally quite high and Next.js can make your life easy in many different ways.</p><p>One of the features that I love the most is how easy it is to build APIs for the frontend application.</p><p>To create an API endpoint you just need to create a file under <code>pages/api</code>. For instance, if you want to create a hello world API, you could simply create the following file in <code>pages/api/hello.ts</code>:</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#f97583">import</span><span style="color:#f97583"> type</span><span style="color:#e1e4e8"> { NextApiRequest, NextApiResponse } </span><span style="color:#f97583">from</span><span style="color:#9ecbff"> 'next'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#f97583">export</span><span style="color:#f97583"> default</span><span style="color:#f97583"> async</span><span style="color:#f97583"> function</span><span style="color:#b392f0"> handler</span><span style="color:#e1e4e8">(</span></span>
<span class="line"><span style="color:#ffab70">  req</span><span style="color:#f97583">:</span><span style="color:#b392f0"> NextApiRequest</span><span style="color:#e1e4e8">,</span></span>
<span class="line"><span style="color:#ffab70">  res</span><span style="color:#f97583">:</span><span style="color:#b392f0"> NextApiResponse</span><span style="color:#e1e4e8">&#x3C;{ </span><span style="color:#ffab70">message</span><span style="color:#f97583">:</span><span style="color:#79b8ff"> string</span><span style="color:#e1e4e8"> }>,</span></span>
<span class="line"><span style="color:#e1e4e8">) {</span></span>
<span class="line"><span style="color:#f97583">  return</span><span style="color:#e1e4e8"> res.</span><span style="color:#b392f0">status</span><span style="color:#e1e4e8">(</span><span style="color:#79b8ff">200</span><span style="color:#e1e4e8">).</span><span style="color:#b392f0">json</span><span style="color:#e1e4e8">({ message: </span><span style="color:#9ecbff">'Hello World'</span><span style="color:#e1e4e8"> })</span></span>
<span class="line"><span style="color:#e1e4e8">}</span></span></code></pre><p>Now you can simply call this API by sending a request to <code>http://localhost:3000/api/hello</code>. The convention says that the API path follows the file name (<code>hello.ts</code> -> <code>/api/hello</code>):</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span>❯ curl -i http://localhost:3000/api/hello</span></span>
<span class="line"><span>HTTP/1.1 200 OK</span></span>
<span class="line"><span>Content-Type: application/json; charset=utf-8</span></span>
<span class="line"><span>ETag: "19-c6Hfa5VVP+Ghysj+6y9cPi5QQbk"</span></span>
<span class="line"><span>Content-Length: 25</span></span>
<span class="line"><span>Vary: Accept-Encoding</span></span>
<span class="line"><span>Date: Sun, 07 Aug 2022 16:25:20 GMT</span></span>
<span class="line"><span>Connection: keep-alive</span></span>
<span class="line"><span>Keep-Alive: timeout=5</span></span>
<span class="line"><span></span></span>
<span class="line"><span>{"message":"Hello World"}</span></span></code></pre><p>If you want to learn more about how to create API endpoints with Next.js check out the <a href="https://nextjs.org/docs/api-routes/introduction">official documentation</a>.</p><p>Ok, so let’s use what we just learned to create an API endpoint that allows the frontend to validate the user invite code and retrieve the related invite data. Let’s create write our code in <code>pages/api/invite.ts</code>:</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#f97583">import</span><span style="color:#f97583"> type</span><span style="color:#e1e4e8"> { NextApiRequest, NextApiResponse } </span><span style="color:#f97583">from</span><span style="color:#9ecbff"> 'next'</span></span>
<span class="line"><span style="color:#f97583">import</span><span style="color:#e1e4e8"> { InviteResponse } </span><span style="color:#f97583">from</span><span style="color:#9ecbff"> '../../types/invite'</span></span>
<span class="line"><span style="color:#f97583">import</span><span style="color:#e1e4e8"> { getInvite } </span><span style="color:#f97583">from</span><span style="color:#9ecbff"> '../../utils/airtable'</span></span>
<span class="line"><span style="color:#f97583">import</span><span style="color:#e1e4e8"> messages </span><span style="color:#f97583">from</span><span style="color:#9ecbff"> '../../data/messages'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#f97583">export</span><span style="color:#f97583"> default</span><span style="color:#f97583"> async</span><span style="color:#f97583"> function</span><span style="color:#b392f0"> handler</span><span style="color:#e1e4e8">(</span></span>
<span class="line"><span style="color:#ffab70">  req</span><span style="color:#f97583">:</span><span style="color:#b392f0"> NextApiRequest</span><span style="color:#e1e4e8">,</span></span>
<span class="line"><span style="color:#ffab70">  res</span><span style="color:#f97583">:</span><span style="color:#b392f0"> NextApiResponse</span><span style="color:#e1e4e8">&#x3C;</span><span style="color:#b392f0">InviteResponse</span><span style="color:#f97583"> |</span><span style="color:#e1e4e8"> { </span><span style="color:#ffab70">error</span><span style="color:#f97583">:</span><span style="color:#79b8ff"> string</span><span style="color:#e1e4e8"> }>,</span></span>
<span class="line"><span style="color:#e1e4e8">) {</span></span>
<span class="line"><span style="color:#6a737d">  // if the request is not a GET, return an error</span></span>
<span class="line"><span style="color:#f97583">  if</span><span style="color:#e1e4e8"> (req.method </span><span style="color:#f97583">!==</span><span style="color:#9ecbff"> 'GET'</span><span style="color:#e1e4e8">) {</span></span>
<span class="line"><span style="color:#f97583">    return</span><span style="color:#e1e4e8"> res.</span><span style="color:#b392f0">status</span><span style="color:#e1e4e8">(</span><span style="color:#79b8ff">405</span><span style="color:#e1e4e8">).</span><span style="color:#b392f0">json</span><span style="color:#e1e4e8">({ error: </span><span style="color:#9ecbff">'Method Not Allowed'</span><span style="color:#e1e4e8"> })</span></span>
<span class="line"><span style="color:#e1e4e8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a737d">  // if the code is missing we return a 400 error</span></span>
<span class="line"><span style="color:#f97583">  if</span><span style="color:#e1e4e8"> (</span><span style="color:#f97583">!</span><span style="color:#e1e4e8">req.query.code) {</span></span>
<span class="line"><span style="color:#f97583">    return</span><span style="color:#e1e4e8"> res.</span><span style="color:#b392f0">status</span><span style="color:#e1e4e8">(</span><span style="color:#79b8ff">400</span><span style="color:#e1e4e8">).</span><span style="color:#b392f0">json</span><span style="color:#e1e4e8">({ error: </span><span style="color:#9ecbff">'Missing invite code'</span><span style="color:#e1e4e8"> })</span></span>
<span class="line"><span style="color:#e1e4e8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a737d">  // If there are multiple invite codes (?code=x&#x26;code=y)</span></span>
<span class="line"><span style="color:#6a737d">  // we pick the first one and ignore the rest</span></span>
<span class="line"><span style="color:#f97583">  const</span><span style="color:#79b8ff"> code</span><span style="color:#f97583"> =</span><span style="color:#e1e4e8"> Array.</span><span style="color:#b392f0">isArray</span><span style="color:#e1e4e8">(req.query.code)</span></span>
<span class="line"><span style="color:#f97583">    ?</span><span style="color:#e1e4e8"> req.query.code[</span><span style="color:#79b8ff">0</span><span style="color:#e1e4e8">]</span></span>
<span class="line"><span style="color:#f97583">    :</span><span style="color:#e1e4e8"> req.query.code</span></span>
<span class="line"></span>
<span class="line"><span style="color:#f97583">  try</span><span style="color:#e1e4e8"> {</span></span>
<span class="line"><span style="color:#6a737d">    // we use our Airtable utility to get the invite data for a given code</span></span>
<span class="line"><span style="color:#6a737d">    // and return the result to the user</span></span>
<span class="line"><span style="color:#f97583">    const</span><span style="color:#79b8ff"> invite</span><span style="color:#f97583"> =</span><span style="color:#f97583"> await</span><span style="color:#b392f0"> getInvite</span><span style="color:#e1e4e8">(code)</span></span>
<span class="line"><span style="color:#e1e4e8">    res.</span><span style="color:#b392f0">status</span><span style="color:#e1e4e8">(</span><span style="color:#79b8ff">200</span><span style="color:#e1e4e8">).</span><span style="color:#b392f0">json</span><span style="color:#e1e4e8">({ invite, messages })</span></span>
<span class="line"><span style="color:#e1e4e8">  } </span><span style="color:#f97583">catch</span><span style="color:#e1e4e8"> (err) {</span></span>
<span class="line"><span style="color:#6a737d">    // In case of error we return either a 401 or a 500 error:</span></span>
<span class="line"><span style="color:#6a737d">    // - if the code was not found we return 401</span></span>
<span class="line"><span style="color:#6a737d">    // - otherwise we return a generic 500 server error</span></span>
<span class="line"><span style="color:#f97583">    const</span><span style="color:#79b8ff"> e</span><span style="color:#f97583"> =</span><span style="color:#e1e4e8"> err </span><span style="color:#f97583">as</span><span style="color:#b392f0"> Error</span></span>
<span class="line"><span style="color:#e1e4e8">    res</span></span>
<span class="line"><span style="color:#e1e4e8">      .</span><span style="color:#b392f0">status</span><span style="color:#e1e4e8">(e.message </span><span style="color:#f97583">===</span><span style="color:#9ecbff"> 'Invite not found'</span><span style="color:#f97583"> ?</span><span style="color:#79b8ff"> 401</span><span style="color:#f97583"> :</span><span style="color:#79b8ff"> 500</span><span style="color:#e1e4e8">)</span></span>
<span class="line"><span style="color:#e1e4e8">      .</span><span style="color:#b392f0">json</span><span style="color:#e1e4e8">({ error: e.message })</span></span>
<span class="line"><span style="color:#e1e4e8">  }</span></span>
<span class="line"><span style="color:#e1e4e8">}</span></span></code></pre><p>Once again the code is sufficiently commented out, so, hopefully, it’s easy enough to follow.</p><p>But there are a few details that we need to discuss: what the <code>InviteResponse</code> type is and what the <code>messages</code> variable is.</p><p><code>InviteResponse</code> is a type that I have sneakily added to <code>types/invite.ts</code>, which now looks like this:</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#f97583">import</span><span style="color:#e1e4e8"> { Messages } </span><span style="color:#f97583">from</span><span style="color:#9ecbff"> '../data/messages'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#f97583">export</span><span style="color:#f97583"> interface</span><span style="color:#b392f0"> Invite</span><span style="color:#e1e4e8"> {</span></span>
<span class="line"><span style="color:#6a737d">  // ... (unchanged, elided for brevity)</span></span>
<span class="line"><span style="color:#e1e4e8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#f97583">export</span><span style="color:#f97583"> interface</span><span style="color:#b392f0"> InviteResponse</span><span style="color:#e1e4e8"> {</span></span>
<span class="line"><span style="color:#ffab70">  invite</span><span style="color:#f97583">:</span><span style="color:#b392f0"> Invite</span></span>
<span class="line"><span style="color:#ffab70">  messages</span><span style="color:#f97583">:</span><span style="color:#b392f0"> Messages</span></span>
<span class="line"><span style="color:#e1e4e8">}</span></span></code></pre><p>The idea is that when a user has a valid code we want this API to return 2 different pieces of information:</p><ol><li>All the data associated with the invite (inside <code>invite</code>)</li><li>All the sensitive messages that the UI will need to display to <em>authenticated</em> users.</li></ol><p>All the messages are stored in <code>data/messages.ts</code>, which currently looks like this:</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#f97583">const</span><span style="color:#79b8ff"> messages</span><span style="color:#f97583"> =</span><span style="color:#e1e4e8"> {</span></span>
<span class="line"><span style="color:#e1e4e8">  title: </span><span style="color:#9ecbff">'Secret Pizza Party!'</span><span style="color:#e1e4e8">,</span></span>
<span class="line"><span style="color:#e1e4e8">  date_and_place: </span><span style="color:#9ecbff">'Dec 31st 2022 - 122 and 1/8th, New York City'</span><span style="color:#e1e4e8">,</span></span>
<span class="line"><span style="color:#e1e4e8">  invitation:</span></span>
<span class="line"><span style="color:#9ecbff">    'You have been invited to the most awesome secret pizza party of the year!'</span><span style="color:#e1e4e8">,</span></span>
<span class="line"><span style="color:#e1e4e8">  question: </span><span style="color:#9ecbff">'Are you coming?'</span><span style="color:#e1e4e8">,</span></span>
<span class="line"><span style="color:#e1e4e8">  answer1: </span><span style="color:#9ecbff">'Cowabunga! (yes)'</span><span style="color:#e1e4e8">,</span></span>
<span class="line"><span style="color:#e1e4e8">  answer2: </span><span style="color:#9ecbff">'Nitwits! (no)'</span><span style="color:#e1e4e8">,</span></span>
<span class="line"><span style="color:#e1e4e8">  secret_person: </span><span style="color:#9ecbff">'Shredder'</span><span style="color:#e1e4e8">,</span></span>
<span class="line"><span style="color:#e1e4e8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#f97583">export</span><span style="color:#f97583"> type</span><span style="color:#b392f0"> Messages</span><span style="color:#f97583"> =</span><span style="color:#f97583"> typeof</span><span style="color:#e1e4e8"> messages</span></span>
<span class="line"><span style="color:#f97583">export</span><span style="color:#f97583"> default</span><span style="color:#e1e4e8"> messages</span></span></code></pre><p>The reason why we return these messages from the API (rather than embedding them in the frontend application code) is that this way these messages won’t be included in the JavaScript bundle. So, a user without an invite code won’t be able to extract potentially sensitive information from the JavaScript bundle of the frontend application.</p><h2 id="invite-validation-in-react">Invite validation in React</h2><p>Great!</p><p>At this point, we have a <em>mini-database</em> (if we want to call our AirTable table like that) and an API to get invite data.</p><p>We can finally start to work on the frontend!</p><p>The first thing that we can do is to build a <strong>custom React hook</strong> that can do the following:</p><ol><li>Grab the invite code from the current URL</li><li>Call the invite API using the invite code</li><li>Expose the returned invite data and the messages</li><li>Also, expose possible errors throughout the process</li></ol><p>I am going to go ahead and show you the code (<code>components/hooks/useInvite.tsx</code>), but if you want to review React docs on how to build custom hooks <a href="https://reactjs.org/docs/hooks-custom.html">here’s the page</a>.</p><p>Our custom hook will be using React’s built-in <a href="https://reactjs.org/docs/hooks-state.html"><code>useState</code></a> hook to handle state and <a href="https://reactjs.org/docs/hooks-effect.html"><code>useEffect</code></a> to run code on component mount.</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#f97583">import</span><span style="color:#e1e4e8"> { useState, useEffect } </span><span style="color:#f97583">from</span><span style="color:#9ecbff"> 'react'</span></span>
<span class="line"><span style="color:#f97583">import</span><span style="color:#e1e4e8"> { InviteResponse } </span><span style="color:#f97583">from</span><span style="color:#9ecbff"> '../../types/invite'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a737d">// Defines the endpoint based on the current window location</span></span>
<span class="line"><span style="color:#f97583">const</span><span style="color:#79b8ff"> API_BASE</span><span style="color:#f97583"> =</span></span>
<span class="line"><span style="color:#f97583">  typeof</span><span style="color:#e1e4e8"> window </span><span style="color:#f97583">!==</span><span style="color:#9ecbff"> 'undefined'</span><span style="color:#f97583"> &#x26;&#x26;</span><span style="color:#e1e4e8"> window.location.origin </span><span style="color:#f97583">+</span><span style="color:#9ecbff"> '/api'</span></span>
<span class="line"><span style="color:#f97583">const</span><span style="color:#79b8ff"> INVITE_ENDPOINT</span><span style="color:#f97583"> =</span><span style="color:#79b8ff"> API_BASE</span><span style="color:#f97583"> +</span><span style="color:#9ecbff"> '/invite'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a737d">// Helper function that uses fetch to invoke the invite API endpoint</span></span>
<span class="line"><span style="color:#f97583">async</span><span style="color:#f97583"> function</span><span style="color:#b392f0"> fetchInvite</span><span style="color:#e1e4e8">(</span><span style="color:#ffab70">code</span><span style="color:#f97583">:</span><span style="color:#79b8ff"> string</span><span style="color:#e1e4e8">)</span><span style="color:#f97583">:</span><span style="color:#b392f0"> Promise</span><span style="color:#e1e4e8">&#x3C;</span><span style="color:#b392f0">InviteResponse</span><span style="color:#e1e4e8">> {</span></span>
<span class="line"><span style="color:#f97583">  const</span><span style="color:#79b8ff"> requestUrl</span><span style="color:#f97583"> =</span><span style="color:#f97583"> new</span><span style="color:#b392f0"> URL</span><span style="color:#e1e4e8">(</span><span style="color:#79b8ff">INVITE_ENDPOINT</span><span style="color:#e1e4e8">)</span></span>
<span class="line"><span style="color:#e1e4e8">  requestUrl.searchParams.</span><span style="color:#b392f0">append</span><span style="color:#e1e4e8">(</span><span style="color:#9ecbff">'code'</span><span style="color:#e1e4e8">, code)</span></span>
<span class="line"><span style="color:#f97583">  const</span><span style="color:#79b8ff"> response</span><span style="color:#f97583"> =</span><span style="color:#f97583"> await</span><span style="color:#b392f0"> fetch</span><span style="color:#e1e4e8">(requestUrl)</span></span>
<span class="line"><span style="color:#f97583">  if</span><span style="color:#e1e4e8"> (</span><span style="color:#f97583">!</span><span style="color:#e1e4e8">response.ok) {</span></span>
<span class="line"><span style="color:#f97583">    throw</span><span style="color:#f97583"> new</span><span style="color:#b392f0"> Error</span><span style="color:#e1e4e8">(</span><span style="color:#9ecbff">'Invalid code'</span><span style="color:#e1e4e8">)</span></span>
<span class="line"><span style="color:#e1e4e8">  }</span></span>
<span class="line"><span style="color:#f97583">  const</span><span style="color:#79b8ff"> invite</span><span style="color:#f97583"> =</span><span style="color:#f97583"> await</span><span style="color:#e1e4e8"> response.</span><span style="color:#b392f0">json</span><span style="color:#e1e4e8">()</span></span>
<span class="line"><span style="color:#f97583">  return</span><span style="color:#e1e4e8"> invite</span></span>
<span class="line"><span style="color:#e1e4e8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a737d">// The custom hook</span></span>
<span class="line"><span style="color:#f97583">export</span><span style="color:#f97583"> default</span><span style="color:#f97583"> function</span><span style="color:#b392f0"> useInvite</span><span style="color:#e1e4e8">()</span><span style="color:#f97583">:</span><span style="color:#e1e4e8"> [</span><span style="color:#b392f0">InviteResponse</span><span style="color:#f97583"> |</span><span style="color:#79b8ff"> null</span><span style="color:#e1e4e8">, </span><span style="color:#79b8ff">string</span><span style="color:#f97583"> |</span><span style="color:#79b8ff"> null</span><span style="color:#e1e4e8">] {</span></span>
<span class="line"><span style="color:#6a737d">  // This hook has the inviteResponse and a possilbe error as state.</span></span>
<span class="line"><span style="color:#f97583">  const</span><span style="color:#e1e4e8"> [</span><span style="color:#79b8ff">inviteResponse</span><span style="color:#e1e4e8">, </span><span style="color:#79b8ff">setInviteResponse</span><span style="color:#e1e4e8">] </span><span style="color:#f97583">=</span><span style="color:#b392f0"> useState</span><span style="color:#e1e4e8">&#x3C;</span><span style="color:#b392f0">InviteResponse</span><span style="color:#f97583"> |</span><span style="color:#79b8ff"> null</span><span style="color:#e1e4e8">>(</span></span>
<span class="line"><span style="color:#79b8ff">    null</span><span style="color:#e1e4e8">,</span></span>
<span class="line"><span style="color:#e1e4e8">  )</span></span>
<span class="line"><span style="color:#f97583">  const</span><span style="color:#e1e4e8"> [</span><span style="color:#79b8ff">error</span><span style="color:#e1e4e8">, </span><span style="color:#79b8ff">setError</span><span style="color:#e1e4e8">] </span><span style="color:#f97583">=</span><span style="color:#b392f0"> useState</span><span style="color:#e1e4e8">&#x3C;</span><span style="color:#79b8ff">string</span><span style="color:#f97583"> |</span><span style="color:#79b8ff"> null</span><span style="color:#e1e4e8">>(</span><span style="color:#79b8ff">null</span><span style="color:#e1e4e8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a737d">  // We want to make the API call when the component using the hook</span></span>
<span class="line"><span style="color:#6a737d">  // is mounted so we use the useEffect hook.</span></span>
<span class="line"><span style="color:#b392f0">  useEffect</span><span style="color:#e1e4e8">(() </span><span style="color:#f97583">=></span><span style="color:#e1e4e8"> {</span></span>
<span class="line"><span style="color:#6a737d">    // We read the code from the current window URL.</span></span>
<span class="line"><span style="color:#f97583">    const</span><span style="color:#79b8ff"> url</span><span style="color:#f97583"> =</span><span style="color:#f97583"> new</span><span style="color:#b392f0"> URL</span><span style="color:#e1e4e8">(window.location.</span><span style="color:#b392f0">toString</span><span style="color:#e1e4e8">())</span></span>
<span class="line"><span style="color:#f97583">    const</span><span style="color:#79b8ff"> code</span><span style="color:#f97583"> =</span><span style="color:#e1e4e8"> url.searchParams.</span><span style="color:#b392f0">get</span><span style="color:#e1e4e8">(</span><span style="color:#9ecbff">'code'</span><span style="color:#e1e4e8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#f97583">    if</span><span style="color:#e1e4e8"> (</span><span style="color:#f97583">!</span><span style="color:#e1e4e8">code) {</span></span>
<span class="line"><span style="color:#6a737d">      // If there is no code, we set an error message.</span></span>
<span class="line"><span style="color:#b392f0">      setError</span><span style="color:#e1e4e8">(</span><span style="color:#9ecbff">'No code provided'</span><span style="color:#e1e4e8">)</span></span>
<span class="line"><span style="color:#e1e4e8">    } </span><span style="color:#f97583">else</span><span style="color:#e1e4e8"> {</span></span>
<span class="line"><span style="color:#6a737d">      // If we have a code, we get the associated data.</span></span>
<span class="line"><span style="color:#6a737d">      // In case of success or failure we update the state accordingly.</span></span>
<span class="line"><span style="color:#b392f0">      fetchInvite</span><span style="color:#e1e4e8">(code)</span></span>
<span class="line"><span style="color:#e1e4e8">        .</span><span style="color:#b392f0">then</span><span style="color:#e1e4e8">(setInviteResponse)</span></span>
<span class="line"><span style="color:#e1e4e8">        .</span><span style="color:#b392f0">catch</span><span style="color:#e1e4e8">((</span><span style="color:#ffab70">err</span><span style="color:#e1e4e8">) </span><span style="color:#f97583">=></span><span style="color:#e1e4e8"> {</span></span>
<span class="line"><span style="color:#b392f0">          setError</span><span style="color:#e1e4e8">(err.message)</span></span>
<span class="line"><span style="color:#e1e4e8">        })</span></span>
<span class="line"><span style="color:#e1e4e8">    }</span></span>
<span class="line"><span style="color:#e1e4e8">  }, [])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a737d">  // We return the state variables.</span></span>
<span class="line"><span style="color:#f97583">  return</span><span style="color:#e1e4e8"> [inviteResponse, error]</span></span>
<span class="line"><span style="color:#e1e4e8">}</span></span></code></pre><p>We can now import this hook into any component and use it like this:</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#f97583">import</span><span style="color:#e1e4e8"> React </span><span style="color:#f97583">from</span><span style="color:#9ecbff"> 'react'</span></span>
<span class="line"><span style="color:#f97583">import</span><span style="color:#e1e4e8"> useInvite </span><span style="color:#f97583">from</span><span style="color:#9ecbff"> './hooks/useInvite'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#f97583">export</span><span style="color:#f97583"> default</span><span style="color:#f97583"> function</span><span style="color:#b392f0"> SomeExampleComponent</span><span style="color:#e1e4e8">() {</span></span>
<span class="line"><span style="color:#f97583">  const</span><span style="color:#e1e4e8"> [</span><span style="color:#79b8ff">inviteResponse</span><span style="color:#e1e4e8">, </span><span style="color:#79b8ff">error</span><span style="color:#e1e4e8">] </span><span style="color:#f97583">=</span><span style="color:#b392f0"> useInvite</span><span style="color:#e1e4e8">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a737d">  // there was an error</span></span>
<span class="line"><span style="color:#f97583">  if</span><span style="color:#e1e4e8"> (error) {</span></span>
<span class="line"><span style="color:#f97583">    return</span><span style="color:#e1e4e8"> &#x3C;</span><span style="color:#85e89d">div</span><span style="color:#e1e4e8">>... some error happened&#x3C;/</span><span style="color:#85e89d">div</span><span style="color:#e1e4e8">></span></span>
<span class="line"><span style="color:#e1e4e8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a737d">  // still loading the data from the backend</span></span>
<span class="line"><span style="color:#f97583">  if</span><span style="color:#e1e4e8"> (</span><span style="color:#f97583">!</span><span style="color:#e1e4e8">inviteResponse) {</span></span>
<span class="line"><span style="color:#f97583">    return</span><span style="color:#e1e4e8"> &#x3C;</span><span style="color:#85e89d">div</span><span style="color:#e1e4e8">>Loading ...&#x3C;/</span><span style="color:#85e89d">div</span><span style="color:#e1e4e8">></span></span>
<span class="line"><span style="color:#e1e4e8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a737d">  // has the data!</span></span>
<span class="line"><span style="color:#f97583">  return</span><span style="color:#e1e4e8"> &#x3C;</span><span style="color:#85e89d">div</span><span style="color:#e1e4e8">>actual component markup when inviteResponse is available&#x3C;/</span><span style="color:#85e89d">div</span><span style="color:#e1e4e8">></span></span>
<span class="line"><span style="color:#e1e4e8">}</span></span></code></pre><p>Note how the hook nicely abstracts the data fetching operation, but we still need to keep into account that this operation will be asynchronous and we need to handle the 3 possible states: <em>loading</em>, success, and error.</p><p>The code above is very similar to the actual <code>Home</code> component in our application. There isn’t much value in showing the entire source code here once you understand the idea, but if you are curious you can find the full source in <a href="https://github.com/lmammino/secret-pizza-party/blob/main/components/Home.tsx"><code>components/Home.tsx</code></a>.</p><p>At this point, the only thing that is missing is to use the <code>Home</code> component in the single page that we are going to have in our Next.js application (it’s a Single Page Application after all).</p><p>In Next.js, page components are components inside the <code>page</code> directory. In our case we will only have the index page, so the component is <a href="https://github.com/lmammino/secret-pizza-party/blob/main/pages/index.tsx"><code>pages/index.tsx</code></a>.</p><p>Finally, if you run the application locally, you should have a loading screen and then a success error (with a valid invite code) or an error (if you didn’t provide a code or if you have an invalid one). 🎉</p><h2 id="collecting-user-data">Collecting user data</h2><p>So far we have only been reading data from our Airtable table, but nothing is stopping us from also writing data into it!</p><p>For example, once a user reaches their invite page, they have an option to RSVP to the event. How are we going to store their answer?</p><p>The simplest idea that comes to mind is to add a new column to our table for the field “coming”:</p><p><img alt="Airtable option field to track whether guests are coming or not" decoding="async" height="672" loading="lazy" src="/_astro/airtable-option-field-coming.uXZRHqRl_Z12D2UX.webp" width="2188"></p><p>The field we added is a <strong>single select</strong> type of field. We added two possible values: <strong>yes</strong> and <strong>no</strong>. In alternative we could have used a boolean field, but with this approach it we actually can manage 3 possible states for user RSVP:</p><ul><li><em>unknown</em> (the gues hasn’t submitted their RSVP yet)</li><li><em>coming</em> (“yes”)</li><li><em>not coming</em> (“no”)</li></ul><p>Now you know why we have originally defined a <code>coming</code> field (optional boolean) in our <code>Invite</code> interface and why we were popoluating it in our <code>utils/airtable.ts</code> helper file! 🙃</p><p>In order to be allow our guests to submit their RSVP we need to do 4 main changes:</p><ol><li>Update the Airtable utility file with a function to update the <code>coming</code> field for a recod</li><li>Create a new API endpoint to collects RSVP (using the new utility function from point 1.)</li><li>Update our <code>useInvite</code> hook to provide functionality to submit the RSVP (and handle progress)</li><li>Update the frontend to use the new functionality provided by the <code>useInvite</code> hook</li></ol><p>We’ll be doing some good amount of refactoring to introduce these changes, so let’s roll up our sleeves and warm up our keyboards!</p><h3 id="the-rsvp-airtable-utility">The RSVP Airtable utility</h3><p>In Airtable, every record in a table has a unique ID. If we know the ID we can use it to update one or more fields in that record.</p><p>In our application we have been using the invite code as unique ID and we already have some code written to be able to fetch a record by invite code.</p><p>It would be a good idea to refactor that code and extract the part that fetches a raw Airtable record. This way we can use this functionality in both our <em>retrieval</em> and <em>update</em> function (the latter which we still have to write).</p><p>So let’s open our file <code>utils/airtable.ts</code> again and add the following changes:</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#f97583">import</span><span style="color:#e1e4e8"> Airtable, { FieldSet, Record } </span><span style="color:#f97583">from</span><span style="color:#9ecbff"> 'airtable'</span></span>
<span class="line"><span style="color:#6a737d">// ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#f97583">export</span><span style="color:#f97583"> function</span><span style="color:#b392f0"> getInviteRecord</span><span style="color:#e1e4e8">(</span><span style="color:#ffab70">inviteCode</span><span style="color:#f97583">:</span><span style="color:#79b8ff"> string</span><span style="color:#e1e4e8">)</span><span style="color:#f97583">:</span><span style="color:#b392f0"> Promise</span><span style="color:#e1e4e8">&#x3C;</span><span style="color:#b392f0">Record</span><span style="color:#e1e4e8">&#x3C;</span><span style="color:#b392f0">FieldSet</span><span style="color:#e1e4e8">>> {</span></span>
<span class="line"><span style="color:#f97583">  return</span><span style="color:#f97583"> new</span><span style="color:#79b8ff"> Promise</span><span style="color:#e1e4e8">((</span><span style="color:#ffab70">resolve</span><span style="color:#e1e4e8">, </span><span style="color:#ffab70">reject</span><span style="color:#e1e4e8">) </span><span style="color:#f97583">=></span><span style="color:#e1e4e8"> {</span></span>
<span class="line"><span style="color:#b392f0">    base</span><span style="color:#e1e4e8">(</span><span style="color:#9ecbff">'invites'</span><span style="color:#e1e4e8">)</span></span>
<span class="line"><span style="color:#6a737d">      // runs a query on the `invites` table</span></span>
<span class="line"><span style="color:#e1e4e8">      .</span><span style="color:#b392f0">select</span><span style="color:#e1e4e8">({</span></span>
<span class="line"><span style="color:#e1e4e8">        filterByFormula: </span><span style="color:#9ecbff">`{invite} = ${</span><span style="color:#b392f0">escape</span><span style="color:#9ecbff">(</span><span style="color:#e1e4e8">inviteCode</span><span style="color:#9ecbff">)</span><span style="color:#9ecbff">}`</span><span style="color:#e1e4e8">,</span></span>
<span class="line"><span style="color:#e1e4e8">        maxRecords: </span><span style="color:#79b8ff">1</span><span style="color:#e1e4e8">,</span></span>
<span class="line"><span style="color:#e1e4e8">      })</span></span>
<span class="line"><span style="color:#6a737d">      // reads the first page of results</span></span>
<span class="line"><span style="color:#e1e4e8">      .</span><span style="color:#b392f0">firstPage</span><span style="color:#e1e4e8">((</span><span style="color:#ffab70">err</span><span style="color:#e1e4e8">, </span><span style="color:#ffab70">records</span><span style="color:#e1e4e8">) </span><span style="color:#f97583">=></span><span style="color:#e1e4e8"> {</span></span>
<span class="line"><span style="color:#f97583">        if</span><span style="color:#e1e4e8"> (err) {</span></span>
<span class="line"><span style="color:#6a737d">          // propagate errors</span></span>
<span class="line"><span style="color:#e1e4e8">          console.</span><span style="color:#b392f0">error</span><span style="color:#e1e4e8">(err)</span></span>
<span class="line"><span style="color:#f97583">          return</span><span style="color:#b392f0"> reject</span><span style="color:#e1e4e8">(err)</span></span>
<span class="line"><span style="color:#e1e4e8">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a737d">        // if the record could not be found</span></span>
<span class="line"><span style="color:#6a737d">        // we consider it an error</span></span>
<span class="line"><span style="color:#f97583">        if</span><span style="color:#e1e4e8"> (</span><span style="color:#f97583">!</span><span style="color:#e1e4e8">records </span><span style="color:#f97583">||</span><span style="color:#e1e4e8"> records.</span><span style="color:#79b8ff">length</span><span style="color:#f97583"> ===</span><span style="color:#79b8ff"> 0</span><span style="color:#e1e4e8">) {</span></span>
<span class="line"><span style="color:#f97583">          return</span><span style="color:#b392f0"> reject</span><span style="color:#e1e4e8">(</span><span style="color:#f97583">new</span><span style="color:#b392f0"> Error</span><span style="color:#e1e4e8">(</span><span style="color:#9ecbff">'Invite not found'</span><span style="color:#e1e4e8">))</span></span>
<span class="line"><span style="color:#e1e4e8">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a737d">        // returns the first record</span></span>
<span class="line"><span style="color:#b392f0">        resolve</span><span style="color:#e1e4e8">(records[</span><span style="color:#79b8ff">0</span><span style="color:#e1e4e8">])</span></span>
<span class="line"><span style="color:#e1e4e8">      })</span></span>
<span class="line"><span style="color:#e1e4e8">  })</span></span>
<span class="line"><span style="color:#e1e4e8">}</span></span></code></pre><p>You might have noticed that this function is almost identical to the <code>getInvite</code> function we wrote before, we are just returning the raw Airtable record, rather than mapping its data to an <code>Invite</code> object.</p><p>So it makes sense to avoid duplication and refactor our <code>getInvite</code>:</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#f97583">export</span><span style="color:#f97583"> async</span><span style="color:#f97583"> function</span><span style="color:#b392f0"> getInvite</span><span style="color:#e1e4e8">(</span><span style="color:#ffab70">inviteCode</span><span style="color:#f97583">:</span><span style="color:#79b8ff"> string</span><span style="color:#e1e4e8">)</span><span style="color:#f97583">:</span><span style="color:#b392f0"> Promise</span><span style="color:#e1e4e8">&#x3C;</span><span style="color:#b392f0">Invite</span><span style="color:#e1e4e8">> {</span></span>
<span class="line"><span style="color:#f97583">  const</span><span style="color:#79b8ff"> inviteRecord</span><span style="color:#f97583"> =</span><span style="color:#f97583"> await</span><span style="color:#b392f0"> getInviteRecord</span><span style="color:#e1e4e8">(inviteCode)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#f97583">  return</span><span style="color:#e1e4e8"> {</span></span>
<span class="line"><span style="color:#e1e4e8">    code: </span><span style="color:#b392f0">String</span><span style="color:#e1e4e8">(inviteRecord.fields.invite),</span></span>
<span class="line"><span style="color:#e1e4e8">    name: </span><span style="color:#b392f0">String</span><span style="color:#e1e4e8">(inviteRecord.fields.name),</span></span>
<span class="line"><span style="color:#e1e4e8">    favouriteColor: </span><span style="color:#b392f0">String</span><span style="color:#e1e4e8">(inviteRecord.fields.favouriteColor),</span></span>
<span class="line"><span style="color:#e1e4e8">    weapon: </span><span style="color:#b392f0">String</span><span style="color:#e1e4e8">(inviteRecord.fields.weapon),</span></span>
<span class="line"><span style="color:#e1e4e8">    coming:</span></span>
<span class="line"><span style="color:#f97583">      typeof</span><span style="color:#e1e4e8"> inviteRecord.fields.coming </span><span style="color:#f97583">===</span><span style="color:#9ecbff"> 'undefined'</span></span>
<span class="line"><span style="color:#f97583">        ?</span><span style="color:#79b8ff"> undefined</span></span>
<span class="line"><span style="color:#f97583">        :</span><span style="color:#e1e4e8"> inviteRecord.fields.coming </span><span style="color:#f97583">===</span><span style="color:#9ecbff"> 'yes'</span><span style="color:#e1e4e8">,</span></span>
<span class="line"><span style="color:#e1e4e8">  }</span></span>
<span class="line"><span style="color:#e1e4e8">}</span></span></code></pre><p>The function is now an <code>async</code> function. It simply calls our new utility method and performs the mapping to an <code>Invite</code> object. Pretty simple, right?</p><p>Ok, now we can finally write the utility that allows us to update the <code>coming</code> field for a given record (by it’s invite code). Let’s call it <code>updateRsvp</code>:</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#f97583">export</span><span style="color:#f97583"> async</span><span style="color:#f97583"> function</span><span style="color:#b392f0"> updateRsvp</span><span style="color:#e1e4e8">(</span></span>
<span class="line"><span style="color:#ffab70">  inviteCode</span><span style="color:#f97583">:</span><span style="color:#79b8ff"> string</span><span style="color:#e1e4e8">,</span></span>
<span class="line"><span style="color:#ffab70">  rsvp</span><span style="color:#f97583">:</span><span style="color:#79b8ff"> boolean</span><span style="color:#e1e4e8">,</span></span>
<span class="line"><span style="color:#e1e4e8">)</span><span style="color:#f97583">:</span><span style="color:#b392f0"> Promise</span><span style="color:#e1e4e8">&#x3C;</span><span style="color:#79b8ff">void</span><span style="color:#e1e4e8">> {</span></span>
<span class="line"><span style="color:#6a737d">  // gets the raw Airtable id of the record to update</span></span>
<span class="line"><span style="color:#f97583">  const</span><span style="color:#e1e4e8"> { </span><span style="color:#79b8ff">id</span><span style="color:#e1e4e8"> } </span><span style="color:#f97583">=</span><span style="color:#f97583"> await</span><span style="color:#b392f0"> getInviteRecord</span><span style="color:#e1e4e8">(inviteCode)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#f97583">  return</span><span style="color:#f97583"> new</span><span style="color:#79b8ff"> Promise</span><span style="color:#e1e4e8">((</span><span style="color:#ffab70">resolve</span><span style="color:#e1e4e8">, </span><span style="color:#ffab70">reject</span><span style="color:#e1e4e8">) </span><span style="color:#f97583">=></span><span style="color:#e1e4e8"> {</span></span>
<span class="line"><span style="color:#b392f0">    base</span><span style="color:#e1e4e8">(</span><span style="color:#9ecbff">'invites'</span><span style="color:#e1e4e8">).</span><span style="color:#b392f0">update</span><span style="color:#e1e4e8">(id, { coming: rsvp </span><span style="color:#f97583">?</span><span style="color:#9ecbff"> 'yes'</span><span style="color:#f97583"> :</span><span style="color:#9ecbff"> 'no'</span><span style="color:#e1e4e8"> }, (</span><span style="color:#ffab70">err</span><span style="color:#e1e4e8">) </span><span style="color:#f97583">=></span><span style="color:#e1e4e8"> {</span></span>
<span class="line"><span style="color:#f97583">      if</span><span style="color:#e1e4e8"> (err) {</span></span>
<span class="line"><span style="color:#f97583">        return</span><span style="color:#b392f0"> reject</span><span style="color:#e1e4e8">(err)</span></span>
<span class="line"><span style="color:#e1e4e8">      }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#b392f0">      resolve</span><span style="color:#e1e4e8">()</span></span>
<span class="line"><span style="color:#e1e4e8">    })</span></span>
<span class="line"><span style="color:#e1e4e8">  })</span></span>
<span class="line"><span style="color:#e1e4e8">}</span></span></code></pre><p>One thing to remark here is that we are using the Airtable <code>update</code> method, which allows us to mutate a subset of fields (in our case only the <code>coming</code> field) and leave unchanged all the other fields. If you’ll ever want to entirely replace a record, well, there’s a <code>replace</code> method for that!</p><h3 id="the-rsvp-endpoint">The RSVP endpoint</h3><p>Now we can put our <code>updateRsvp</code> utility to good use and expose it through an API endpoint. To do that we can create a new API route by adding the file <code>pages/api/rsvp.ts</code>:</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#f97583">import</span><span style="color:#f97583"> type</span><span style="color:#e1e4e8"> { NextApiRequest, NextApiResponse } </span><span style="color:#f97583">from</span><span style="color:#9ecbff"> 'next'</span></span>
<span class="line"><span style="color:#f97583">import</span><span style="color:#e1e4e8"> { updateRsvp } </span><span style="color:#f97583">from</span><span style="color:#9ecbff"> '../../utils/airtable'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#f97583">type</span><span style="color:#b392f0"> RequestBody</span><span style="color:#f97583"> =</span><span style="color:#e1e4e8"> { </span><span style="color:#ffab70">coming</span><span style="color:#f97583">?:</span><span style="color:#79b8ff"> boolean</span><span style="color:#e1e4e8"> }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#f97583">export</span><span style="color:#f97583"> default</span><span style="color:#f97583"> async</span><span style="color:#f97583"> function</span><span style="color:#b392f0"> handler</span><span style="color:#e1e4e8">(</span></span>
<span class="line"><span style="color:#ffab70">  req</span><span style="color:#f97583">:</span><span style="color:#b392f0"> NextApiRequest</span><span style="color:#e1e4e8">,</span></span>
<span class="line"><span style="color:#ffab70">  res</span><span style="color:#f97583">:</span><span style="color:#b392f0"> NextApiResponse</span><span style="color:#e1e4e8">&#x3C;{ </span><span style="color:#ffab70">updated</span><span style="color:#f97583">:</span><span style="color:#79b8ff"> boolean</span><span style="color:#e1e4e8"> } </span><span style="color:#f97583">|</span><span style="color:#e1e4e8"> { </span><span style="color:#ffab70">error</span><span style="color:#f97583">:</span><span style="color:#79b8ff"> string</span><span style="color:#e1e4e8"> }>,</span></span>
<span class="line"><span style="color:#e1e4e8">) {</span></span>
<span class="line"><span style="color:#6a737d">  // if the request is not a PUT, return an error</span></span>
<span class="line"><span style="color:#f97583">  if</span><span style="color:#e1e4e8"> (req.method </span><span style="color:#f97583">!==</span><span style="color:#9ecbff"> 'PUT'</span><span style="color:#e1e4e8">) {</span></span>
<span class="line"><span style="color:#f97583">    return</span><span style="color:#e1e4e8"> res.</span><span style="color:#b392f0">status</span><span style="color:#e1e4e8">(</span><span style="color:#79b8ff">405</span><span style="color:#e1e4e8">).</span><span style="color:#b392f0">json</span><span style="color:#e1e4e8">({ error: </span><span style="color:#9ecbff">'Method Not Allowed'</span><span style="color:#e1e4e8"> })</span></span>
<span class="line"><span style="color:#e1e4e8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a737d">  // if the code is missing we return a 400 error</span></span>
<span class="line"><span style="color:#f97583">  if</span><span style="color:#e1e4e8"> (</span><span style="color:#f97583">!</span><span style="color:#e1e4e8">req.query.code) {</span></span>
<span class="line"><span style="color:#f97583">    return</span><span style="color:#e1e4e8"> res.</span><span style="color:#b392f0">status</span><span style="color:#e1e4e8">(</span><span style="color:#79b8ff">400</span><span style="color:#e1e4e8">).</span><span style="color:#b392f0">json</span><span style="color:#e1e4e8">({ error: </span><span style="color:#9ecbff">'Missing invite code'</span><span style="color:#e1e4e8"> })</span></span>
<span class="line"><span style="color:#e1e4e8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#f97583">  const</span><span style="color:#79b8ff"> reqBody</span><span style="color:#f97583"> =</span><span style="color:#e1e4e8"> req.body </span><span style="color:#f97583">as</span><span style="color:#b392f0"> RequestBody</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a737d">  // if the code is missing we return a 400 error</span></span>
<span class="line"><span style="color:#f97583">  if</span><span style="color:#e1e4e8"> (</span><span style="color:#f97583">typeof</span><span style="color:#e1e4e8"> reqBody.coming </span><span style="color:#f97583">===</span><span style="color:#9ecbff"> 'undefined'</span><span style="color:#e1e4e8">) {</span></span>
<span class="line"><span style="color:#f97583">    return</span><span style="color:#e1e4e8"> res.</span><span style="color:#b392f0">status</span><span style="color:#e1e4e8">(</span><span style="color:#79b8ff">400</span><span style="color:#e1e4e8">).</span><span style="color:#b392f0">json</span><span style="color:#e1e4e8">({ error: </span><span style="color:#9ecbff">'Missing `coming` field in body'</span><span style="color:#e1e4e8"> })</span></span>
<span class="line"><span style="color:#e1e4e8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a737d">  // If there are multiple invite codes (?code=x&#x26;code=y)</span></span>
<span class="line"><span style="color:#6a737d">  // we pick the first one and ignore the rest</span></span>
<span class="line"><span style="color:#f97583">  const</span><span style="color:#79b8ff"> code</span><span style="color:#f97583"> =</span><span style="color:#e1e4e8"> Array.</span><span style="color:#b392f0">isArray</span><span style="color:#e1e4e8">(req.query.code)</span></span>
<span class="line"><span style="color:#f97583">    ?</span><span style="color:#e1e4e8"> req.query.code[</span><span style="color:#79b8ff">0</span><span style="color:#e1e4e8">]</span></span>
<span class="line"><span style="color:#f97583">    :</span><span style="color:#e1e4e8"> req.query.code</span></span>
<span class="line"></span>
<span class="line"><span style="color:#f97583">  try</span><span style="color:#e1e4e8"> {</span></span>
<span class="line"><span style="color:#f97583">    await</span><span style="color:#b392f0"> updateRsvp</span><span style="color:#e1e4e8">(code, reqBody.coming)</span></span>
<span class="line"><span style="color:#f97583">    return</span><span style="color:#e1e4e8"> res.</span><span style="color:#b392f0">status</span><span style="color:#e1e4e8">(</span><span style="color:#79b8ff">200</span><span style="color:#e1e4e8">).</span><span style="color:#b392f0">json</span><span style="color:#e1e4e8">({ updated: </span><span style="color:#79b8ff">true</span><span style="color:#e1e4e8"> })</span></span>
<span class="line"><span style="color:#e1e4e8">  } </span><span style="color:#f97583">catch</span><span style="color:#e1e4e8"> (err) {</span></span>
<span class="line"><span style="color:#6a737d">    // In case of error we return either a 401 or a 500 error:</span></span>
<span class="line"><span style="color:#6a737d">    // - if the code was not found we return 401</span></span>
<span class="line"><span style="color:#6a737d">    // - otherwise we return a generic 500 server error</span></span>
<span class="line"><span style="color:#f97583">    const</span><span style="color:#79b8ff"> e</span><span style="color:#f97583"> =</span><span style="color:#e1e4e8"> err </span><span style="color:#f97583">as</span><span style="color:#b392f0"> Error</span></span>
<span class="line"><span style="color:#e1e4e8">    res</span></span>
<span class="line"><span style="color:#e1e4e8">      .</span><span style="color:#b392f0">status</span><span style="color:#e1e4e8">(e.message </span><span style="color:#f97583">===</span><span style="color:#9ecbff"> 'Invite not found'</span><span style="color:#f97583"> ?</span><span style="color:#79b8ff"> 401</span><span style="color:#f97583"> :</span><span style="color:#79b8ff"> 500</span><span style="color:#e1e4e8">)</span></span>
<span class="line"><span style="color:#e1e4e8">      .</span><span style="color:#b392f0">json</span><span style="color:#e1e4e8">({ error: e.message })</span></span>
<span class="line"><span style="color:#e1e4e8">  }</span></span>
<span class="line"><span style="color:#e1e4e8">}</span></span></code></pre><p>A few things to note here:</p><ul><li>The API endpoint is now live at <code>http://localhost:3000/api/rsvp</code>.</li><li>This API receives 2 pieces of information: the invite code as a query string parameter and the <code>coming</code> field in the request body (encoded as a JSON object with just the <code>coming</code> field).</li><li>This API is a <code>PUT</code> endpoint. We are receiving some partial data to update a record so it makes sense to use PUT.</li><li>We are not being entirely <em>RESTful</em> (mostly for simplicity). If we wanted to be <em>RESTful</em> we should have created a <code>PUT</code> endpoint on the <code>/api/invite/{code}</code> path. This is possible in Next.js but it’s slightly more involved, so I went for a simpler solution (since this is a small pet project).</li></ul><h3 id="useinvite-hook-version-2"><code>useInvite</code> hook version 2</h3><p>Ok, now that we have an API to update to submit an RSVP, we can update the <code>useInvite</code> hook to take advantage of this functionality. Be warned: we’ll also be doing some decent amount of refactoring here… Let’s update the <code>useInvite</code> code in <code>components/hooks/useInvite.tsx</code>:</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#6a737d">// ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a737d">// adds the URL of the new endpoint</span></span>
<span class="line"><span style="color:#f97583">const</span><span style="color:#79b8ff"> RSVP_ENDPOINT</span><span style="color:#f97583"> =</span><span style="color:#79b8ff"> API_BASE</span><span style="color:#f97583"> +</span><span style="color:#9ecbff"> '/rsvp'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a737d">// type for the data returned by the hook</span></span>
<span class="line"><span style="color:#6a737d">// since we want to return 4 different pieces of information</span></span>
<span class="line"><span style="color:#6a737d">// it's better to organise them in an object, rather tha using</span></span>
<span class="line"><span style="color:#6a737d">// an array</span></span>
<span class="line"><span style="color:#f97583">interface</span><span style="color:#b392f0"> HookResult</span><span style="color:#e1e4e8"> {</span></span>
<span class="line"><span style="color:#ffab70">  inviteResponse</span><span style="color:#f97583">:</span><span style="color:#b392f0"> InviteResponse</span><span style="color:#f97583"> |</span><span style="color:#79b8ff"> null</span></span>
<span class="line"><span style="color:#ffab70">  error</span><span style="color:#f97583">:</span><span style="color:#79b8ff"> string</span><span style="color:#f97583"> |</span><span style="color:#79b8ff"> null</span></span>
<span class="line"><span style="color:#ffab70">  updating</span><span style="color:#f97583">:</span><span style="color:#79b8ff"> boolean</span></span>
<span class="line"><span style="color:#b392f0">  updateRsvp</span><span style="color:#f97583">:</span><span style="color:#e1e4e8"> (</span><span style="color:#ffab70">coming</span><span style="color:#f97583">:</span><span style="color:#79b8ff"> boolean</span><span style="color:#e1e4e8">) </span><span style="color:#f97583">=></span><span style="color:#b392f0"> Promise</span><span style="color:#e1e4e8">&#x3C;</span><span style="color:#79b8ff">void</span><span style="color:#e1e4e8">></span></span>
<span class="line"><span style="color:#e1e4e8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a737d">// ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a737d">// Helper function that invokes the rsvp API endpoint</span></span>
<span class="line"><span style="color:#f97583">async</span><span style="color:#f97583"> function</span><span style="color:#b392f0"> updateRsvpRequest</span><span style="color:#e1e4e8">(</span><span style="color:#ffab70">code</span><span style="color:#f97583">:</span><span style="color:#79b8ff"> string</span><span style="color:#e1e4e8">, </span><span style="color:#ffab70">coming</span><span style="color:#f97583">:</span><span style="color:#79b8ff"> boolean</span><span style="color:#e1e4e8">)</span><span style="color:#f97583">:</span><span style="color:#b392f0"> Promise</span><span style="color:#e1e4e8">&#x3C;</span><span style="color:#79b8ff">void</span><span style="color:#e1e4e8">> {</span></span>
<span class="line"><span style="color:#f97583">  const</span><span style="color:#79b8ff"> requestUrl</span><span style="color:#f97583"> =</span><span style="color:#f97583"> new</span><span style="color:#b392f0"> URL</span><span style="color:#e1e4e8">(</span><span style="color:#79b8ff">RSVP_ENDPOINT</span><span style="color:#e1e4e8">)</span></span>
<span class="line"><span style="color:#e1e4e8">  requestUrl.searchParams.</span><span style="color:#b392f0">append</span><span style="color:#e1e4e8">(</span><span style="color:#9ecbff">'code'</span><span style="color:#e1e4e8">, code)</span></span>
<span class="line"><span style="color:#f97583">  const</span><span style="color:#79b8ff"> response</span><span style="color:#f97583"> =</span><span style="color:#f97583"> await</span><span style="color:#b392f0"> fetch</span><span style="color:#e1e4e8">(requestUrl, {</span></span>
<span class="line"><span style="color:#e1e4e8">    method: </span><span style="color:#9ecbff">'PUT'</span><span style="color:#e1e4e8">,</span></span>
<span class="line"><span style="color:#e1e4e8">    headers: {</span></span>
<span class="line"><span style="color:#9ecbff">      'Content-Type'</span><span style="color:#e1e4e8">: </span><span style="color:#9ecbff">'application/json'</span><span style="color:#e1e4e8">,</span></span>
<span class="line"><span style="color:#e1e4e8">    },</span></span>
<span class="line"><span style="color:#e1e4e8">    body: </span><span style="color:#79b8ff">JSON</span><span style="color:#e1e4e8">.</span><span style="color:#b392f0">stringify</span><span style="color:#e1e4e8">({ coming }),</span></span>
<span class="line"><span style="color:#e1e4e8">  })</span></span>
<span class="line"><span style="color:#f97583">  if</span><span style="color:#e1e4e8"> (</span><span style="color:#f97583">!</span><span style="color:#e1e4e8">response.ok) {</span></span>
<span class="line"><span style="color:#f97583">    throw</span><span style="color:#f97583"> new</span><span style="color:#b392f0"> Error</span><span style="color:#e1e4e8">(</span><span style="color:#9ecbff">'Failed to update RSVP'</span><span style="color:#e1e4e8">)</span></span>
<span class="line"><span style="color:#e1e4e8">  }</span></span>
<span class="line"><span style="color:#e1e4e8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#f97583">export</span><span style="color:#f97583"> default</span><span style="color:#f97583"> function</span><span style="color:#b392f0"> useInvite</span><span style="color:#e1e4e8">()</span><span style="color:#f97583">:</span><span style="color:#b392f0"> HookResult</span><span style="color:#e1e4e8"> {</span></span>
<span class="line"><span style="color:#f97583">  const</span><span style="color:#e1e4e8"> [</span><span style="color:#79b8ff">inviteResponse</span><span style="color:#e1e4e8">, </span><span style="color:#79b8ff">setInviteResponse</span><span style="color:#e1e4e8">] </span><span style="color:#f97583">=</span><span style="color:#b392f0"> useState</span><span style="color:#e1e4e8">&#x3C;</span><span style="color:#b392f0">InviteResponse</span><span style="color:#f97583"> |</span><span style="color:#79b8ff"> null</span><span style="color:#e1e4e8">>(</span></span>
<span class="line"><span style="color:#79b8ff">    null</span><span style="color:#e1e4e8">,</span></span>
<span class="line"><span style="color:#e1e4e8">  )</span></span>
<span class="line"><span style="color:#f97583">  const</span><span style="color:#e1e4e8"> [</span><span style="color:#79b8ff">error</span><span style="color:#e1e4e8">, </span><span style="color:#79b8ff">setError</span><span style="color:#e1e4e8">] </span><span style="color:#f97583">=</span><span style="color:#b392f0"> useState</span><span style="color:#e1e4e8">&#x3C;</span><span style="color:#79b8ff">string</span><span style="color:#f97583"> |</span><span style="color:#79b8ff"> null</span><span style="color:#e1e4e8">>(</span><span style="color:#79b8ff">null</span><span style="color:#e1e4e8">)</span></span>
<span class="line"><span style="color:#6a737d">  // new state field to track when an RSVP update is in progress</span></span>
<span class="line"><span style="color:#f97583">  const</span><span style="color:#e1e4e8"> [</span><span style="color:#79b8ff">updating</span><span style="color:#e1e4e8">, </span><span style="color:#79b8ff">setUpdating</span><span style="color:#e1e4e8">] </span><span style="color:#f97583">=</span><span style="color:#b392f0"> useState</span><span style="color:#e1e4e8">&#x3C;</span><span style="color:#79b8ff">boolean</span><span style="color:#e1e4e8">>(</span><span style="color:#79b8ff">false</span><span style="color:#e1e4e8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#b392f0">  useEffect</span><span style="color:#e1e4e8">(() </span><span style="color:#f97583">=></span><span style="color:#e1e4e8"> {</span></span>
<span class="line"><span style="color:#f97583">    const</span><span style="color:#79b8ff"> url</span><span style="color:#f97583"> =</span><span style="color:#f97583"> new</span><span style="color:#b392f0"> URL</span><span style="color:#e1e4e8">(window.location.</span><span style="color:#b392f0">toString</span><span style="color:#e1e4e8">())</span></span>
<span class="line"><span style="color:#f97583">    const</span><span style="color:#79b8ff"> code</span><span style="color:#f97583"> =</span><span style="color:#e1e4e8"> url.searchParams.</span><span style="color:#b392f0">get</span><span style="color:#e1e4e8">(</span><span style="color:#9ecbff">'code'</span><span style="color:#e1e4e8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#f97583">    if</span><span style="color:#e1e4e8"> (</span><span style="color:#f97583">!</span><span style="color:#e1e4e8">code) {</span></span>
<span class="line"><span style="color:#b392f0">      setError</span><span style="color:#e1e4e8">(</span><span style="color:#9ecbff">'No code provided'</span><span style="color:#e1e4e8">)</span></span>
<span class="line"><span style="color:#e1e4e8">    } </span><span style="color:#f97583">else</span><span style="color:#e1e4e8"> {</span></span>
<span class="line"><span style="color:#b392f0">      fetchInvite</span><span style="color:#e1e4e8">(code)</span></span>
<span class="line"><span style="color:#e1e4e8">        .</span><span style="color:#b392f0">then</span><span style="color:#e1e4e8">(setInviteResponse)</span></span>
<span class="line"><span style="color:#e1e4e8">        .</span><span style="color:#b392f0">catch</span><span style="color:#e1e4e8">((</span><span style="color:#ffab70">err</span><span style="color:#e1e4e8">) </span><span style="color:#f97583">=></span><span style="color:#e1e4e8"> {</span></span>
<span class="line"><span style="color:#b392f0">          setError</span><span style="color:#e1e4e8">(err.message)</span></span>
<span class="line"><span style="color:#e1e4e8">        })</span></span>
<span class="line"><span style="color:#e1e4e8">    }</span></span>
<span class="line"><span style="color:#e1e4e8">  }, [])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a737d">  // new hook function that exposes the ability to update the current invite by</span></span>
<span class="line"><span style="color:#6a737d">  // providing a value for the `coming` field</span></span>
<span class="line"><span style="color:#f97583">  async</span><span style="color:#f97583"> function</span><span style="color:#b392f0"> updateRsvp</span><span style="color:#e1e4e8">(</span><span style="color:#ffab70">coming</span><span style="color:#f97583">:</span><span style="color:#79b8ff"> boolean</span><span style="color:#e1e4e8">) {</span></span>
<span class="line"><span style="color:#f97583">    if</span><span style="color:#e1e4e8"> (inviteResponse) {</span></span>
<span class="line"><span style="color:#b392f0">      setUpdating</span><span style="color:#e1e4e8">(</span><span style="color:#79b8ff">true</span><span style="color:#e1e4e8">)</span></span>
<span class="line"><span style="color:#f97583">      await</span><span style="color:#b392f0"> updateRsvpRequest</span><span style="color:#e1e4e8">(inviteResponse.invite.code, coming)</span></span>
<span class="line"><span style="color:#6a737d">      // updates the current invite response, by cloning the original</span></span>
<span class="line"><span style="color:#6a737d">      // object and updating the `coming` property.</span></span>
<span class="line"><span style="color:#b392f0">      setInviteResponse</span><span style="color:#e1e4e8">({</span></span>
<span class="line"><span style="color:#f97583">        ...</span><span style="color:#e1e4e8">inviteResponse,</span></span>
<span class="line"><span style="color:#e1e4e8">        invite: { </span><span style="color:#f97583">...</span><span style="color:#e1e4e8">inviteResponse.invite, coming },</span></span>
<span class="line"><span style="color:#e1e4e8">      })</span></span>
<span class="line"><span style="color:#b392f0">      setUpdating</span><span style="color:#e1e4e8">(</span><span style="color:#79b8ff">false</span><span style="color:#e1e4e8">)</span></span>
<span class="line"><span style="color:#e1e4e8">    }</span></span>
<span class="line"><span style="color:#e1e4e8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a737d">  // We return the state variables and the updateRsvp function.</span></span>
<span class="line"><span style="color:#f97583">  return</span><span style="color:#e1e4e8"> { inviteResponse, error, updating, updateRsvp }</span></span>
<span class="line"><span style="color:#e1e4e8">}</span></span></code></pre><p>Some code was omitted. You should have gotten an idea for the main changes, but feel free to check the full content of the file <a href="https://github.com/lmammino/secret-pizza-party/blob/main/components/hooks/useInvite.tsx">in the repository</a> in case you are following along and using this as an hands-on tutorial.</p><h3 id="using-the-updated-hook">Using the updated hook</h3><p>I have mixed feelings when it comes to hooks and react. They are sometimes hard to use correctly because of the many rules around them, but to be honest, once you get the gist of them, they are pretty darn convenient.</p><p>In this case, our <code>useInvite</code> hook can deliver us a lot of value. In fact, it encapsulates all the business logic and lifecycle management to deal with loading and updating invites for the current user. When using this hook in a component, we don’t really have to worry too much about all of these concers: we can literally just access the data and decide when to trigger an update, the hook will handle everything else and trigger a re-render when necessary.</p><p>Let’s see how we can use the hook now. Again, there isn’t much point in showing all our actual code, so let’s observe a simplified example that illustrates the point (you can still <a href="https://github.com/lmammino/secret-pizza-party/blob/main/components/Home.tsx">see the complete file in the repository</a>).</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#f97583">import</span><span style="color:#e1e4e8"> React, { ChangeEvent } </span><span style="color:#f97583">from</span><span style="color:#9ecbff"> 'react'</span></span>
<span class="line"><span style="color:#f97583">import</span><span style="color:#e1e4e8"> useInvite </span><span style="color:#f97583">from</span><span style="color:#9ecbff"> './hooks/useInvite'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a737d">// ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#f97583">export</span><span style="color:#f97583"> default</span><span style="color:#f97583"> function</span><span style="color:#b392f0"> Home</span><span style="color:#e1e4e8">() {</span></span>
<span class="line"><span style="color:#6a737d">  // We are now destructuring all the hook attributes and functions</span></span>
<span class="line"><span style="color:#6a737d">  //  - inviteResponse: the invite response (when available)</span></span>
<span class="line"><span style="color:#6a737d">  //  - error: an error message (if there was an error loading the data)</span></span>
<span class="line"><span style="color:#6a737d">  //  - updating: a boolean that will be true if an update is in progress</span></span>
<span class="line"><span style="color:#6a737d">  //  - updateRsvp: the function that allows us to update the current invite (coming or not)</span></span>
<span class="line"><span style="color:#f97583">  const</span><span style="color:#e1e4e8"> { </span><span style="color:#79b8ff">inviteResponse</span><span style="color:#e1e4e8">, </span><span style="color:#79b8ff">error</span><span style="color:#e1e4e8">, </span><span style="color:#79b8ff">updating</span><span style="color:#e1e4e8">, </span><span style="color:#79b8ff">updateRsvp</span><span style="color:#e1e4e8"> } </span><span style="color:#f97583">=</span><span style="color:#b392f0"> useInvite</span><span style="color:#e1e4e8">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#f97583">  if</span><span style="color:#e1e4e8"> (error) {</span></span>
<span class="line"><span style="color:#6a737d">    // There was an error loading the data</span></span>
<span class="line"><span style="color:#f97583">    return</span><span style="color:#e1e4e8"> &#x3C;</span><span style="color:#85e89d">div</span><span style="color:#e1e4e8">>Duh! {error}&#x3C;/</span><span style="color:#85e89d">div</span><span style="color:#e1e4e8">></span></span>
<span class="line"><span style="color:#e1e4e8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#f97583">  if</span><span style="color:#e1e4e8"> (</span><span style="color:#f97583">!</span><span style="color:#e1e4e8">inviteResponse) {</span></span>
<span class="line"><span style="color:#6a737d">    // Still loading the invite data</span></span>
<span class="line"><span style="color:#f97583">    return</span><span style="color:#e1e4e8"> &#x3C;</span><span style="color:#85e89d">div</span><span style="color:#e1e4e8">>Loading...&#x3C;/</span><span style="color:#85e89d">div</span><span style="color:#e1e4e8">></span></span>
<span class="line"><span style="color:#e1e4e8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a737d">  // Utility function to trigger an update when the user</span></span>
<span class="line"><span style="color:#6a737d">  // checks one of the radio buttons to RSVP</span></span>
<span class="line"><span style="color:#f97583">  function</span><span style="color:#b392f0"> onRsvpChange</span><span style="color:#e1e4e8">(</span><span style="color:#ffab70">e</span><span style="color:#f97583">:</span><span style="color:#b392f0"> ChangeEvent</span><span style="color:#e1e4e8">&#x3C;</span><span style="color:#b392f0">HTMLInputElement</span><span style="color:#e1e4e8">>) {</span></span>
<span class="line"><span style="color:#f97583">    const</span><span style="color:#79b8ff"> coming</span><span style="color:#f97583"> =</span><span style="color:#e1e4e8"> e.target.value </span><span style="color:#f97583">===</span><span style="color:#9ecbff"> 'yes'</span></span>
<span class="line"><span style="color:#b392f0">    updateRsvp</span><span style="color:#e1e4e8">(coming)</span></span>
<span class="line"><span style="color:#e1e4e8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a737d">  // Data loaded correctly: we can display the UI!</span></span>
<span class="line"><span style="color:#f97583">  return</span><span style="color:#e1e4e8"> (</span></span>
<span class="line"><span style="color:#e1e4e8">    &#x3C;</span><span style="color:#85e89d">div</span><span style="color:#e1e4e8">></span></span>
<span class="line"><span style="color:#e1e4e8">      &#x3C;</span><span style="color:#85e89d">fieldset</span><span style="color:#b392f0"> disabled</span><span style="color:#f97583">=</span><span style="color:#e1e4e8">{updating}></span></span>
<span class="line"><span style="color:#e1e4e8">        &#x3C;</span><span style="color:#85e89d">legend</span><span style="color:#e1e4e8">>Are you coming?&#x3C;/</span><span style="color:#85e89d">legend</span><span style="color:#e1e4e8">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#e1e4e8">        &#x3C;</span><span style="color:#85e89d">label</span><span style="color:#b392f0"> htmlFor</span><span style="color:#f97583">=</span><span style="color:#9ecbff">"yes"</span><span style="color:#e1e4e8">></span></span>
<span class="line"><span style="color:#e1e4e8">          &#x3C;</span><span style="color:#85e89d">input</span></span>
<span class="line"><span style="color:#b392f0">            type</span><span style="color:#f97583">=</span><span style="color:#9ecbff">"radio"</span></span>
<span class="line"><span style="color:#b392f0">            id</span><span style="color:#f97583">=</span><span style="color:#9ecbff">"yes"</span></span>
<span class="line"><span style="color:#b392f0">            name</span><span style="color:#f97583">=</span><span style="color:#9ecbff">"coming"</span></span>
<span class="line"><span style="color:#b392f0">            value</span><span style="color:#f97583">=</span><span style="color:#9ecbff">"yes"</span></span>
<span class="line"><span style="color:#b392f0">            onChange</span><span style="color:#f97583">=</span><span style="color:#e1e4e8">{onRsvpChange}</span></span>
<span class="line"><span style="color:#b392f0">            checked</span><span style="color:#f97583">=</span><span style="color:#e1e4e8">{inviteResponse.invite.coming </span><span style="color:#f97583">===</span><span style="color:#79b8ff"> true</span><span style="color:#e1e4e8">}</span></span>
<span class="line"><span style="color:#e1e4e8">          /></span></span>
<span class="line"><span style="color:#e1e4e8">          YES</span></span>
<span class="line"><span style="color:#e1e4e8">        &#x3C;/</span><span style="color:#85e89d">label</span><span style="color:#e1e4e8">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#e1e4e8">        &#x3C;</span><span style="color:#85e89d">label</span><span style="color:#b392f0"> htmlFor</span><span style="color:#f97583">=</span><span style="color:#9ecbff">"no"</span><span style="color:#e1e4e8">></span></span>
<span class="line"><span style="color:#e1e4e8">          &#x3C;</span><span style="color:#85e89d">input</span></span>
<span class="line"><span style="color:#b392f0">            type</span><span style="color:#f97583">=</span><span style="color:#9ecbff">"radio"</span></span>
<span class="line"><span style="color:#b392f0">            id</span><span style="color:#f97583">=</span><span style="color:#9ecbff">"no"</span></span>
<span class="line"><span style="color:#b392f0">            name</span><span style="color:#f97583">=</span><span style="color:#9ecbff">"coming"</span></span>
<span class="line"><span style="color:#b392f0">            value</span><span style="color:#f97583">=</span><span style="color:#9ecbff">"no"</span></span>
<span class="line"><span style="color:#b392f0">            onChange</span><span style="color:#f97583">=</span><span style="color:#e1e4e8">{onRsvpChange}</span></span>
<span class="line"><span style="color:#b392f0">            checked</span><span style="color:#f97583">=</span><span style="color:#e1e4e8">{inviteResponse.invite.coming </span><span style="color:#f97583">===</span><span style="color:#79b8ff"> false</span><span style="color:#e1e4e8">}</span></span>
<span class="line"><span style="color:#e1e4e8">          /></span></span>
<span class="line"><span style="color:#e1e4e8">          NO</span></span>
<span class="line"><span style="color:#e1e4e8">        &#x3C;/</span><span style="color:#85e89d">label</span><span style="color:#e1e4e8">></span></span>
<span class="line"><span style="color:#e1e4e8">      &#x3C;/</span><span style="color:#85e89d">fieldset</span><span style="color:#e1e4e8">></span></span>
<span class="line"><span style="color:#e1e4e8">    &#x3C;/</span><span style="color:#85e89d">div</span><span style="color:#e1e4e8">></span></span>
<span class="line"><span style="color:#e1e4e8">  )</span></span>
<span class="line"><span style="color:#e1e4e8">}</span></span></code></pre><p>Note how the two <code>input</code> have an <code>onChange={onRsvpChange}</code> to actually trigger the change when the user checks one of the radio buttons. <code>onRsvpChange</code> will in turn invoke <code>updateRsvp</code> from the hook, using the value of the selected radio button (<code>"yes"</code> or <code>"no"</code> will turn into <code>true</code> or <code>false</code>).</p><p>We also control the input, by specifying <code>checked={inviteResponse.invite.coming === &#x3C;value>}</code>, so that the input updates accordingly when the data is actually changed by the <code>useInvite</code> hook.</p><h3 id="working-app">Working app</h3><p>At this point we should have a working application!</p><p>One thing that I really like about Airtable is that, when you are looking at a table in their web UI, if the underlying data changes, you’ll see a flash that showcases the change.</p><p>This is a pretty great way to test how our application is actually changing the data in real-time:</p><p><img alt="Airtable dynamic table update animation" decoding="async" height="406" loading="lazy" src="/_astro/airtable-dynamic-table-update-example.vGATfY7s_JTvFl.webp" width="800"></p><p>Cool, isn’t it? 😎</p><h2 id="deploying-to-vercel">Deploying to Vercel</h2><p>Now we have a fully functional application. We are able to get users in only if they have a valid invite code and we can even register their RSVP.</p><p>But all of this is running on our local machine, so how do we put it online?</p><p>Next.js websites can be deployed in a number of places, but being a Vercel product, it should be no surprise the deploying on Vercel is the easiest option (at least for what I have tried).</p><p>This is roughly the list of steps that you should take to deploy on Vercel (from GitHub):</p><ul><li>Once you have all your code in a repository on GitHub, you can create an account on <a href="https://vercel.com/">Vercel</a> by logging in using GitHub.</li><li>At this point, you can create a new project (there’s a big button for that) and then select <strong>import Git Repository</strong>.</li><li>From that window you should see a list containing all your GitHub repositories.</li><li>Select the repository with your code and cick on <strong>import</strong>.</li><li>At this point Vercel will automatically build your code and deploy it, giving you a <strong>.vercel.app</strong> unique domain.</li><li>If you want, you can also customise the domain and provide a custom one!</li></ul><p>What happened behind the scens is that Vercel has deployed all your static assets (HTML, CSS, JavaScript, images,etc) to a CDN and all your API code to a serverless runtime that will be spawn up on demand when new requests arrive.</p><p>The best part is that, once you have done all of this and you have your website online, Vercel has already setup a simple but effective CI/CD workflow for you:</p><ul><li>Every time you deploy to your <code>main</code> branch, Vercel will automatically build and release the changes</li><li>If you deploy on another branch, Vercel will deploy and release the changes, but on a temporary URL that you can use to preview your changes.</li></ul><p><img alt="Vercel Application dashboard" decoding="async" height="986" loading="lazy" src="/_astro/vercel-application-dashboard.PLgNnZBh_Z1PpLSy.webp" width="1000"></p><p>That’s it! You can finally share your invite-only website will all your guests, and I am sure they are going to love it! 😜</p><h2 id="a-backend-less-alternative-approach">A backend-less alternative approach</h2><p>Before we wrap up, I want to give a quick mention to an idea I had while I was writing this post.</p><p>If we relax a bit our requirements removing the fact that we might want to collect user data (RSVP), there migth be a <em>“backend-less”</em> alternative implementation.</p><p>Rather than using random invite codes, we could, in fact, use <a href="/whats-in-a-jwt">JSON Web Tokens</a>.</p><p>We could embed all the necessary information into the token paylos:</p><pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0"><code><span class="line"><span style="color:#b392f0">❯</span><span style="color:#9ecbff"> jwtinfo</span><span style="color:#9ecbff"> "eyJhbGciOiJFUzUxMiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiTGVvbmFyZG8iLCJmYXZvdXJpdGVDb2xvciI6ImJsdWUiLCJ3ZWFwb24iOiJUd2luIEthdGFuYSJ9.Ac69w5qHwnpzX3DZX4np-AZxcYcUA2D1aW64O2wB53v277MmamEuALJp6un2LTkYAeyciCz8eY6bRMNf9tq9e_KRAZcznffZf-vNUnzaWh9TgFhKuEdn2kI8B4d4NBP0TSW6iq-PLNVfwzldjilYA-QJRevcztSmcc-cEpZHukQdUHjy"</span><span style="color:#f97583"> |</span><span style="color:#b392f0"> jq</span><span style="color:#9ecbff"> .</span></span>
<span class="line"></span>
<span class="line"><span style="color:#e1e4e8">{</span></span>
<span class="line"><span style="color:#b392f0">  "favouriteColor"</span><span style="color:#79b8ff">:</span><span style="color:#9ecbff"> "blue",</span></span>
<span class="line"><span style="color:#b392f0">  "name"</span><span style="color:#79b8ff">:</span><span style="color:#9ecbff"> "Leonardo",</span></span>
<span class="line"><span style="color:#b392f0">  "weapon"</span><span style="color:#79b8ff">:</span><span style="color:#9ecbff"> "Twin Katana"</span></span>
<span class="line"><span style="color:#e1e4e8">}</span></span></code></pre><p>Yes, you should totally check out <a href="/learning-rust-through-open-source-and-live-code-reviews">the story of this cool <code>jwtinfo</code> command</a>!</p><p>The JWT signature should be generated using an asymmetric algorithm like <code>ES512</code>. At that point the frontend could embed the public key and use it to validate tokens and decide to show the information or not.</p><p>This would a be a very simple approach and it’s not free from flaws, for example:</p><ul><li>All the information needs to be embedded in the token</li><li>You won’t have a way to fetch private information from an API, so you are forced to put more stuff into the token or end up leaking sensitive information in your JavaScript bundle</li></ul><p>Still this simple approach might be good enough for simple websites that might be building for your friends and family!</p><p>Plus, you’d get to use JWT, which is a cool technology! 😜</p><p>As always, keep in mind that in technology there isn’t a perfect solution, just a different set of tradeoffs!</p><h2 id="conclusion">Conclusion</h2><p>In this post we learned how to build an invite only Single Page Application using Next.js and Airtable as a data storage layer.</p><p>In the process we also saw how to create backend APIs with Next.js, how to create custom hook to simplify data fetching and update from the frontend and how to deploy our final creation to Vercel.</p><p>I am curious to know what you think about this approach and if you are thinking to use this for some personal or work projects.</p><p>Do let me know in the comments and, if you found this post valuable, consider <a href="https://twitter.com/loige">following me on Twitter</a> and sharing this article!</p><p>Thank you and see you in the next article! 👋</p></article><div class="border-text-100 border-t mt-8 pt-8"><div class="flex items-center justify-between gap-4"><div><h3 class="font-bold text-text-500">Sharing is caring!</h3><p class="text-text-400 max-w-sm text-sm">If you got value from this article, please consider sharing it with your friends and colleagues.</p></div><div class="flex gap-2"><a href="https://loige.co/invite-only-microsites-with-nextjs-and-airtable" class="text-text-400 hover:text-text-500 py-1 bg-primary-100 border border-primary-200 hidden hover:bg-primary-200 hover:border-primary-300 px-4 rounded-full text-lg transition" title="Copy link to clipboard" role="button" id="copy-link"><span class="flex items-center text-nowrap gap-2"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img" class="h-4 w-4"><title>Copy Icon</title><path d="M21 8.94a1.31 1.31 0 0 0-.06-.27v-.09a1.07 1.07 0 0 0-.19-.28l-6-6a1.07 1.07 0 0 0-.28-.19a.32.32 0 0 0-.09 0a.88.88 0 0 0-.33-.11H10a3 3 0 0 0-3 3v1H6a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h8a3 3 0 0 0 3-3v-1h1a3 3 0 0 0 3-3V9zm-6-3.53L17.59 8H16a1 1 0 0 1-1-1ZM15 19a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h1v7a3 3 0 0 0 3 3h5Zm4-4a1 1 0 0 1-1 1h-8a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h3v3a3 3 0 0 0 3 3h3Z" fill="currentColor"/></svg> <span aria-role="label" data-text-copied="Copied!" data-text-normal="Copy link">Copy link</span> </span></a><a href="https://www.linkedin.com/sharing/share-offsite/?mini=tru&#38;url=https%3A%2F%2Floige.co%2Finvite-only-microsites-with-nextjs-and-airtable&#38;title=Invite-only%20microsites%20with%20Next.js%20and%20AirTable" class="text-text-400 hover:text-text-500 border rounded-full text-lg transition bg-secondary-100 border-secondary-200 hover:bg-secondary-200 hover:border-secondary-300 inline-flex px-3 py-2" rel="noopener noreferrer" target="_blank" role="button" title="Share this article on LinkedIn"><span class="flex items-center text-nowrap"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img" class="h-4 w-4"><title>LinkedIn Icon</title><path d="M17.5 8.999a5.419 5.419 0 0 0-2.565.645A1 1 0 0 0 14 8.999h-4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-5.5a1 1 0 1 1 2 0v5.5a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-7.5a5.507 5.507 0 0 0-5.5-5.5m3.5 12h-2v-4.5a3 3 0 1 0-6 0v4.5h-2v-10h2v.703a1 1 0 0 0 1.781.625A3.483 3.483 0 0 1 21 14.5Zm-14-12H3a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-12a1 1 0 0 0-1-1m-1 12H4v-10h2ZM5.015 1.542a3.233 3.233 0 1 0-.057 6.457h.028a3.233 3.233 0 1 0 .029-6.457m-.029 4.457h-.028a1.222 1.222 0 0 1-1.37-1.228c0-.747.56-1.229 1.427-1.229A1.234 1.234 0 0 1 6.41 4.771c0 .746-.56 1.228-1.425 1.228" fill="currentColor"/></svg><span class="sr-only">Linkedin</span></span> </a><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Floige.co%2Finvite-only-microsites-with-nextjs-and-airtable" class="text-text-400 hover:text-text-500 border rounded-full text-lg transition bg-secondary-100 border-secondary-200 hover:bg-secondary-200 hover:border-secondary-300 inline-flex px-3" rel="noopener noreferrer" target="_blank" role="button" title="Share this article on Facebook"><span class="flex items-center text-nowrap"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img" class="h-4 w-4"><title>Facebook Icon</title><path d="M15.12 5.32H17V2.14A26.11 26.11 0 0 0 14.26 2c-2.72 0-4.58 1.66-4.58 4.7v2.62H6.61v3.56h3.07V22h3.68v-9.12h3.06l.46-3.56h-3.52V7.05c0-1.05.28-1.73 1.76-1.73" fill="currentColor"/></svg><span class="sr-only">Facebook</span></span> </a><a href="https://twitter.com/intent/tweet?text=Invite-only%20microsites%20with%20Next.js%20and%20AirTable&#38;url=https%3A%2F%2Floige.co%2Finvite-only-microsites-with-nextjs-and-airtable" class="text-text-400 hover:text-text-500 border rounded-full text-lg transition bg-secondary-100 border-secondary-200 hover:bg-secondary-200 hover:border-secondary-300 inline-flex px-3" rel="noopener noreferrer" target="_blank" role="button" title="Share this article on X, formerly Twitter"><span class="flex items-center text-nowrap"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img" class="h-4 w-4"><title>X, formerly Twitter Icon</title><path d="M16.8198 20.7684L3.75317 3.96836C3.44664 3.57425 3.72749 3 4.22678 3H6.70655C6.8917 3 7.06649 3.08548 7.18016 3.23164L20.2468 20.0316C20.5534 20.4258 20.2725 21 19.7732 21H17.2935C17.1083 21 16.9335 20.9145 16.8198 20.7684Z" stroke="currentColor" stroke-width="2"/><path d="M20 3L4 21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg><span class="sr-only">X, formerly Twitter</span></span></a></div></div></div><div class="text-sm border-t border-text-100 mt-8 pt-8"><h3 class="text-text-400 font-bold">Found a typo or something that can be improved?</h3><p class="text-text-400 mt-1">In the spirit of Open Source, you can contribute to this article by <a href="https://github.com/lmammino/loige.co/edit/main/src/content/posts/2022-08-09_invite-only-microsites-with-nextjs-and-airtable/index.md" class="underline hover:text-text-500" rel="noopener noreferrer" target="_blank">submitting a PR on GitHub</a>.</p></div><div class="border-text-100 border-t mt-8 pt-8" id="comments"><div id="disqus_thread" data-url="https://loige.co/invite-only-microsites-with-nextjs-and-airtable"></div></div></div></div></div><div class="bg-bg-500 relative z-40"><div class="mx-auto max-w-screen-xl px-8 py-16"><h2 class="font-bold text-text-500 mb-8 text-3xl text-center">You might also like</h2><div class="gap-4 grid grid-cols-1 lg:gap-8 lg:grid-cols-3 md:grid-cols-2"><a href="/create-resources-conditionally-with-cdk" class="flex flex-col rounded-lg hover:outline hover:shadow-lg outline-4 outline-primary-500 overflow-hidden shadow-md transition-all" title="Create resources conditionally with CDK"><picture><source srcset="/_astro/create-resources-conditionally-with-cdk.tztkyQ8U_jKK2k.webp" type="image/webp"><source srcset="/_astro/create-resources-conditionally-with-cdk.tztkyQ8U_Z2bF9eU.avif" type="image/avif"><source srcset="/_astro/create-resources-conditionally-with-cdk.tztkyQ8U_Z2ikqij.jpeg" type="image/jpeg"><img alt="Cover picture for a blog post titled Create resources conditionally with CDK" decoding="async" height="224" loading="lazy" src="/_astro/create-resources-conditionally-with-cdk.tztkyQ8U_Z1rcdru.png" width="400" class="transition h-56 object-cover w-full"></picture><div class="flex flex-col p-4 bg-bg-300 flex-1 sm:p-6"><h3 class="font-bold text-text-500 mt-0.5 text-xl">Create resources conditionally with CDK</h3><p class="text-text-400 line-clamp-3 mb-auto mt-2 text-ellipsis text-sm/relaxed">This post explains how to conditionally create resources in AWS CDK using CfnCondition. It provides a practical example of creating an S3 bucket based on an SSM parameter value. The post covers defining a condition, attaching it to a low-level CDK construct, and importing the conditionally created resource.</p><p class="mt-2 text-sm/relaxed text-text-300"><span class="gap-2 inline-flex self-center"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img" class="h-4 w-4"><title>Calendar Icon</title><path d="M12 19a1 1 0 1 0-1-1a1 1 0 0 0 1 1m5 0a1 1 0 1 0-1-1a1 1 0 0 0 1 1m0-4a1 1 0 1 0-1-1a1 1 0 0 0 1 1m-5 0a1 1 0 1 0-1-1a1 1 0 0 0 1 1m7-12h-1V2a1 1 0 0 0-2 0v1H8V2a1 1 0 0 0-2 0v1H5a3 3 0 0 0-3 3v14a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3m1 17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-9h16Zm0-11H4V6a1 1 0 0 1 1-1h1v1a1 1 0 0 0 2 0V5h8v1a1 1 0 0 0 2 0V5h1a1 1 0 0 1 1 1ZM7 15a1 1 0 1 0-1-1a1 1 0 0 0 1 1m0 4a1 1 0 1 0-1-1a1 1 0 0 0 1 1" fill="currentColor"/></svg> <time datetime="2021-11-01T09:15:00.000Z" title="2021-11-01T09:15:00.000Z">2021-11-01</time></span></p></div></a><a href="/provision-ubuntu-ec2-with-cdk" class="flex flex-col rounded-lg hover:outline hover:shadow-lg outline-4 outline-primary-500 overflow-hidden shadow-md transition-all" title="Provision an Ubuntu-based EC2 instance with CDK"><picture><source srcset="/_astro/provision-ubuntu-ec2-with-cdk-luciano-mammino-loige.44QsJyNR_Z1fNDol.webp" type="image/webp"><source srcset="/_astro/provision-ubuntu-ec2-with-cdk-luciano-mammino-loige.44QsJyNR_1fJEzN.avif" type="image/avif"><source srcset="/_astro/provision-ubuntu-ec2-with-cdk-luciano-mammino-loige.44QsJyNR_ZHVKw3.jpeg" type="image/jpeg"><img alt="Cover picture for a blog post titled Provision an Ubuntu-based EC2 instance with CDK" decoding="async" height="224" loading="lazy" src="/_astro/provision-ubuntu-ec2-with-cdk-luciano-mammino-loige.44QsJyNR_1PKw9R.jpg" width="400" class="transition h-56 object-cover w-full"></picture><div class="flex flex-col p-4 bg-bg-300 flex-1 sm:p-6"><h3 class="font-bold text-text-500 mt-0.5 text-xl">Provision an Ubuntu-based EC2 instance with CDK</h3><p class="text-text-400 line-clamp-3 mb-auto mt-2 text-ellipsis text-sm/relaxed">This post explains how to use CDK to provision Ubuntu EC2 instances on AWS. It covers finding the right AMI, adding security groups, using init scripts, installing AWS utilities, and more.</p><p class="mt-2 text-sm/relaxed text-text-300"><span class="gap-2 inline-flex self-center"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img" class="h-4 w-4"><title>Calendar Icon</title><path d="M12 19a1 1 0 1 0-1-1a1 1 0 0 0 1 1m5 0a1 1 0 1 0-1-1a1 1 0 0 0 1 1m0-4a1 1 0 1 0-1-1a1 1 0 0 0 1 1m-5 0a1 1 0 1 0-1-1a1 1 0 0 0 1 1m7-12h-1V2a1 1 0 0 0-2 0v1H8V2a1 1 0 0 0-2 0v1H5a3 3 0 0 0-3 3v14a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3m1 17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-9h16Zm0-11H4V6a1 1 0 0 1 1-1h1v1a1 1 0 0 0 2 0V5h8v1a1 1 0 0 0 2 0V5h1a1 1 0 0 1 1 1ZM7 15a1 1 0 1 0-1-1a1 1 0 0 0 1 1m0 4a1 1 0 1 0-1-1a1 1 0 0 0 1 1" fill="currentColor"/></svg> <time datetime="2021-08-06T13:05:00.000Z" title="2021-08-06T13:05:00.000Z">2021-08-06</time></span></p></div></a><a href="/fastify-and-preact-for-quick-web-app-prototyping" class="flex flex-col rounded-lg hover:outline hover:shadow-lg outline-4 outline-primary-500 overflow-hidden shadow-md transition-all" title="Fastify and Preact for quick web app prototyping"><picture><source srcset="/_astro/fastify-and-preact-for-quick-web-app-prototyping.iXjAv5eC_Z1IlXi5.webp" type="image/webp"><source srcset="/_astro/fastify-and-preact-for-quick-web-app-prototyping.iXjAv5eC_Z2iAFLa.avif" type="image/avif"><source srcset="/_astro/fastify-and-preact-for-quick-web-app-prototyping.iXjAv5eC_16O7Oi.jpeg" type="image/jpeg"><img alt="Cover picture for a blog post titled Fastify and Preact for quick web app prototyping" decoding="async" height="224" loading="lazy" src="/_astro/fastify-and-preact-for-quick-web-app-prototyping.iXjAv5eC_1GPtb5.jpg" width="400" class="transition h-56 object-cover w-full"></picture><div class="flex flex-col p-4 bg-bg-300 flex-1 sm:p-6"><h3 class="font-bold text-text-500 mt-0.5 text-xl">Fastify and Preact for quick web app prototyping</h3><p class="text-text-400 line-clamp-3 mb-auto mt-2 text-ellipsis text-sm/relaxed">This article shows how to quickly build web app prototypes using Fastify for the backend API and Preact for the frontend UI. It also covers how to dockerize the app for easy sharing. Key points are the plugin architecture of Fastify, the lightweight nature of Preact, and the use of htm for defining UI without transpilation.</p><p class="mt-2 text-sm/relaxed text-text-300"><span class="gap-2 inline-flex self-center"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img" class="h-4 w-4"><title>Calendar Icon</title><path d="M12 19a1 1 0 1 0-1-1a1 1 0 0 0 1 1m5 0a1 1 0 1 0-1-1a1 1 0 0 0 1 1m0-4a1 1 0 1 0-1-1a1 1 0 0 0 1 1m-5 0a1 1 0 1 0-1-1a1 1 0 0 0 1 1m7-12h-1V2a1 1 0 0 0-2 0v1H8V2a1 1 0 0 0-2 0v1H5a3 3 0 0 0-3 3v14a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3m1 17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-9h16Zm0-11H4V6a1 1 0 0 1 1-1h1v1a1 1 0 0 0 2 0V5h8v1a1 1 0 0 0 2 0V5h1a1 1 0 0 1 1 1ZM7 15a1 1 0 1 0-1-1a1 1 0 0 0 1 1m0 4a1 1 0 1 0-1-1a1 1 0 0 0 1 1" fill="currentColor"/></svg> <time datetime="2019-02-18T20:22:58.000Z" title="2019-02-18T20:22:58.000Z">2019-02-18</time></span></p></div></a><a href="/emerging-javascript-pattern-multiple-return-values" class="flex flex-col rounded-lg hover:outline hover:shadow-lg outline-4 outline-primary-500 overflow-hidden shadow-md transition-all" title="Emerging JavaScript pattern: multiple return values"><picture><source srcset="/_astro/emerging-javascript-pattern-multiple-return-values.nQ-GFLCg_1T4MHC.webp" type="image/webp"><source srcset="/_astro/emerging-javascript-pattern-multiple-return-values.nQ-GFLCg_ZEy27a.avif" type="image/avif"><source srcset="/_astro/emerging-javascript-pattern-multiple-return-values.nQ-GFLCg_2qVFzU.jpeg" type="image/jpeg"><img alt="Cover picture for a blog post titled Emerging JavaScript pattern: multiple return values" decoding="async" height="224" loading="lazy" src="/_astro/emerging-javascript-pattern-multiple-return-values.nQ-GFLCg_Z4xax6.jpg" width="400" class="transition h-56 object-cover w-full"></picture><div class="flex flex-col p-4 bg-bg-300 flex-1 sm:p-6"><h3 class="font-bold text-text-500 mt-0.5 text-xl">Emerging JavaScript pattern: multiple return values</h3><p class="text-text-400 line-clamp-3 mb-auto mt-2 text-ellipsis text-sm/relaxed">This article explores how to simulate multiple return values in JavaScript using arrays and objects. It covers use cases like React Hooks and async/await error handling. The pattern enables elegant APIs but has performance implications.</p><p class="mt-2 text-sm/relaxed text-text-300"><span class="gap-2 inline-flex self-center"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img" class="h-4 w-4"><title>Calendar Icon</title><path d="M12 19a1 1 0 1 0-1-1a1 1 0 0 0 1 1m5 0a1 1 0 1 0-1-1a1 1 0 0 0 1 1m0-4a1 1 0 1 0-1-1a1 1 0 0 0 1 1m-5 0a1 1 0 1 0-1-1a1 1 0 0 0 1 1m7-12h-1V2a1 1 0 0 0-2 0v1H8V2a1 1 0 0 0-2 0v1H5a3 3 0 0 0-3 3v14a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3m1 17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-9h16Zm0-11H4V6a1 1 0 0 1 1-1h1v1a1 1 0 0 0 2 0V5h8v1a1 1 0 0 0 2 0V5h1a1 1 0 0 1 1 1ZM7 15a1 1 0 1 0-1-1a1 1 0 0 0 1 1m0 4a1 1 0 1 0-1-1a1 1 0 0 0 1 1" fill="currentColor"/></svg> <time datetime="2018-11-11T17:00:00.000Z" title="2018-11-11T17:00:00.000Z">2018-11-11</time></span></p></div></a><a href="/my-universal-javascript-web-applications-talk-at-codemotion-rome-2017" class="flex flex-col rounded-lg hover:outline hover:shadow-lg outline-4 outline-primary-500 overflow-hidden shadow-md transition-all" title="My Universal JavaScript Web Applications talk at Codemotion Rome 2017"><picture><source srcset="/_astro/my-universal-javascript-web-applications-talk-at-codemotion-rome-2017.2cO4AHUb_Z2cpFsE.webp" type="image/webp"><source srcset="/_astro/my-universal-javascript-web-applications-talk-at-codemotion-rome-2017.2cO4AHUb_2h2bW.avif" type="image/avif"><source srcset="/_astro/my-universal-javascript-web-applications-talk-at-codemotion-rome-2017.2cO4AHUb_FHvGz.jpeg" type="image/jpeg"><img alt="Cover picture for a blog post titled My Universal JavaScript Web Applications talk at Codemotion Rome 2017" decoding="async" height="224" loading="lazy" src="/_astro/my-universal-javascript-web-applications-talk-at-codemotion-rome-2017.2cO4AHUb_Z1A7NTz.jpg" width="400" class="transition h-56 object-cover w-full"></picture><div class="flex flex-col p-4 bg-bg-300 flex-1 sm:p-6"><h3 class="font-bold text-text-500 mt-0.5 text-xl">My Universal JavaScript Web Applications talk at Codemotion Rome 2017</h3><p class="text-text-400 line-clamp-3 mb-auto mt-2 text-ellipsis text-sm/relaxed">The author gave a talk on building universal JavaScript web apps at Codemotion Rome 2017. He updated his Judo Heroes demo to v2 with React 15.4, React Router 4, Webpack 2, and Express 5. The talk got positive feedback from the audience. Slides and video are linked.</p><p class="mt-2 text-sm/relaxed text-text-300"><span class="gap-2 inline-flex self-center"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img" class="h-4 w-4"><title>Calendar Icon</title><path d="M12 19a1 1 0 1 0-1-1a1 1 0 0 0 1 1m5 0a1 1 0 1 0-1-1a1 1 0 0 0 1 1m0-4a1 1 0 1 0-1-1a1 1 0 0 0 1 1m-5 0a1 1 0 1 0-1-1a1 1 0 0 0 1 1m7-12h-1V2a1 1 0 0 0-2 0v1H8V2a1 1 0 0 0-2 0v1H5a3 3 0 0 0-3 3v14a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3m1 17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-9h16Zm0-11H4V6a1 1 0 0 1 1-1h1v1a1 1 0 0 0 2 0V5h8v1a1 1 0 0 0 2 0V5h1a1 1 0 0 1 1 1ZM7 15a1 1 0 1 0-1-1a1 1 0 0 0 1 1m0 4a1 1 0 1 0-1-1a1 1 0 0 0 1 1" fill="currentColor"/></svg> <time datetime="2017-04-11T22:41:40.000Z" title="2017-04-11T22:41:40.000Z">2017-04-11</time></span></p></div></a><a href="/my-universal-javascript-web-applications-talk-at-codemotion-milan-2016-2" class="flex flex-col rounded-lg hover:outline hover:shadow-lg outline-4 outline-primary-500 overflow-hidden shadow-md transition-all" title="My Universal JavaScript Web Applications talk at Codemotion Milan 2016"><picture><source srcset="/_astro/my-universal-javascript-web-applications-talk-at-codemotion-milan-2016-2.MkDDPdOj_1GudYe.webp" type="image/webp"><source srcset="/_astro/my-universal-javascript-web-applications-talk-at-codemotion-milan-2016-2.MkDDPdOj_Z11Vt3T.avif" type="image/avif"><source srcset="/_astro/my-universal-javascript-web-applications-talk-at-codemotion-milan-2016-2.MkDDPdOj_Z3SPxf.jpeg" type="image/jpeg"><img alt="Cover picture for a blog post titled My Universal JavaScript Web Applications talk at Codemotion Milan 2016" decoding="async" height="224" loading="lazy" src="/_astro/my-universal-javascript-web-applications-talk-at-codemotion-milan-2016-2.MkDDPdOj_ZDr8n0.jpg" width="400" class="transition h-56 object-cover w-full"></picture><div class="flex flex-col p-4 bg-bg-300 flex-1 sm:p-6"><h3 class="font-bold text-text-500 mt-0.5 text-xl">My Universal JavaScript Web Applications talk at Codemotion Milan 2016</h3><p class="text-text-400 line-clamp-3 mb-auto mt-2 text-ellipsis text-sm/relaxed">This blog post summarizes a talk about building a Universal JavaScript application with React given at Codemotion Milan 2016. It includes commentary for each slide, photos from Twitter, and a video recording. The post explains what Universal JavaScript is, its benefits, challenges, and walks through demo code to add server-side rendering and routing to a React app.</p><p class="mt-2 text-sm/relaxed text-text-300"><span class="gap-2 inline-flex self-center"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img" class="h-4 w-4"><title>Calendar Icon</title><path d="M12 19a1 1 0 1 0-1-1a1 1 0 0 0 1 1m5 0a1 1 0 1 0-1-1a1 1 0 0 0 1 1m0-4a1 1 0 1 0-1-1a1 1 0 0 0 1 1m-5 0a1 1 0 1 0-1-1a1 1 0 0 0 1 1m7-12h-1V2a1 1 0 0 0-2 0v1H8V2a1 1 0 0 0-2 0v1H5a3 3 0 0 0-3 3v14a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3m1 17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-9h16Zm0-11H4V6a1 1 0 0 1 1-1h1v1a1 1 0 0 0 2 0V5h8v1a1 1 0 0 0 2 0V5h1a1 1 0 0 1 1 1ZM7 15a1 1 0 1 0-1-1a1 1 0 0 0 1 1m0 4a1 1 0 1 0-1-1a1 1 0 0 0 1 1" fill="currentColor"/></svg> <time datetime="2016-11-26T09:53:55.000Z" title="2016-11-26T09:53:55.000Z">2016-11-26</time></span></p></div></a></div></div></div></div></main><footer class="bg-bg-500 relative z-40 -mt-32" data-astro-cid-sz7xmlte><div class="shadow-xl [background:radial-gradient(circle_at_30%_0%,_var(--color-primary-900)_0%,var(--color-primary-700)_30%)] bg-bg-900 border-primary-700 border-t-4" data-astro-cid-sz7xmlte><div class="mx-auto max-w-screen-xl px-8 py-8" data-astro-cid-sz7xmlte><div class="md:flex md:flex-1 md:flex-wrap md:gap-4 md:justify-between" data-astro-cid-sz7xmlte><div class="md:mb-0 mb-20" data-astro-cid-sz7xmlte><h3 class="text-primary-100 text-lg uppercase" data-astro-cid-sz7xmlte><a href="/" class="underline decoration-accent-500 decoration-2 underline-offset-4" data-astro-cid-sz7xmlte>loige.co</a></h3><p class="text-sm text-text-100" data-astro-cid-sz7xmlte>The personal website of Luciano Mammino</p><p class="text-sm mt-4 text-text-200" data-astro-cid-sz7xmlte>&copy; 2014-2024 Luciano Mammino.</p><p class="text-sm text-text-200 mt-1" data-astro-cid-sz7xmlte>Built with <a href="https://astro.build/" data-astro-cid-sz7xmlte rel="nofollow noopener noreferrer" target="_blank">Astro</a>, <a href="https://tailwindcss.com/" data-astro-cid-sz7xmlte rel="nofollow noopener noreferrer" target="_blank">TailwindCSS</a>, Coffee and a lot of <span class="ml-1 text-red-400" data-astro-cid-sz7xmlte role="img" title="love">❤︎<span class="sr-only" data-astro-cid-sz7xmlte>love</span></span>.</p><p class="text-sm text-text-200 mt-1" data-astro-cid-sz7xmlte>Hosted on <a href="https://github.com/lmammino/loige.co" data-astro-cid-sz7xmlte rel="nofollow noopener noreferrer" target="_blank">GitHub Pages</a>, accelerated by <a href="https://www.cloudflare.com/" data-astro-cid-sz7xmlte rel="nofollow noopener noreferrer" target="_blank">Cloudflare</a>.</p></div><div class="md:mb-0 mb-6" data-astro-cid-sz7xmlte><h3 class="font-bold text-primary-300 text-sm uppercase" data-astro-cid-sz7xmlte>Explore</h3><ul class="flex flex-col mt-4 gap-2 text-sm" data-astro-cid-sz7xmlte><li data-astro-cid-sz7xmlte><a href="/" data-astro-cid-sz7xmlte>Home</a></li><li data-astro-cid-sz7xmlte><a href="/blog" data-astro-cid-sz7xmlte>Blog</a></li><li data-astro-cid-sz7xmlte><a href="/speaking" data-astro-cid-sz7xmlte>Speaking</a></li><li data-astro-cid-sz7xmlte><a href="/about" data-astro-cid-sz7xmlte>About</a></li><li data-astro-cid-sz7xmlte><a href="/comment-policy" data-astro-cid-sz7xmlte>Comment Policy</a></li></ul></div><div class="md:mb-0 mb-6" data-astro-cid-sz7xmlte><h3 class="font-bold text-primary-300 text-sm uppercase" data-astro-cid-sz7xmlte>My Projects</h3><ul class="flex flex-col mt-4 gap-2 text-sm" data-astro-cid-sz7xmlte><li data-astro-cid-sz7xmlte><a href="https://www.nodejsdesignpatterns.com/" data-astro-cid-sz7xmlte target="_blank">Node.js Design Patterns</a></li><li data-astro-cid-sz7xmlte><a href="https://awsbites.com/" data-astro-cid-sz7xmlte target="_blank">AWS Bites</a></li><li data-astro-cid-sz7xmlte><a href="https://fullstackbulletin.com/" data-astro-cid-sz7xmlte target="_blank">FullStack Bulletin</a></li><li data-astro-cid-sz7xmlte><a href="https://middy.js.org/" data-astro-cid-sz7xmlte target="_blank">Middy</a></li></ul></div><div class="md:mb-0 mb-6" data-astro-cid-sz7xmlte><h3 class="font-bold text-primary-300 text-sm uppercase" data-astro-cid-sz7xmlte>Let's connect</h3><ul class="flex flex-col mt-4 gap-2 text-sm" data-astro-cid-sz7xmlte><li data-astro-cid-sz7xmlte><a href="https://twitter.com/loige" class="flex align-middle font-normal" rel="me" data-astro-cid-sz7xmlte><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img" data-astro-cid-sz7xmlte="" fill="none" height="1rem" stroke-width="2" width="1rem"><path d="M16.8198 20.7684L3.75317 3.96836C3.44664 3.57425 3.72749 3 4.22678 3H6.70655C6.8917 3 7.06649 3.08548 7.18016 3.23164L20.2468 20.0316C20.5534 20.4258 20.2725 21 19.7732 21H17.2935C17.1083 21 16.9335 20.9145 16.8198 20.7684Z" data-astro-cid-sz7xmlte="" stroke="currentColor" stroke-width="2"/><path d="M20 3L4 21" data-astro-cid-sz7xmlte="" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg> <span class="flex pl-2" data-astro-cid-sz7xmlte>X (Twitter)</span></a></li><li data-astro-cid-sz7xmlte><a href="https://mastodon.ie/@loige" class="flex align-middle font-normal" rel="me" data-astro-cid-sz7xmlte><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img" data-astro-cid-sz7xmlte="" fill="none" height="1rem" stroke-width="2" width="1rem"><path d="M7 13.5C7 13.5 7 10.7574 7 9C7 5.99998 12 6 12 9C12 10.1716 12 12 12 12" data-astro-cid-sz7xmlte="" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M17 13.5C17 13.5 17 10.7574 17 9C17 5.99998 12 6 12 9C12 10.1716 12 12 12 12" data-astro-cid-sz7xmlte="" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M7.99993 17C15.5 18 20.9999 17 20.9999 13L21 9C21.0003 3.5 17.0003 2.5 15 2.5H9C5.99989 2.5 2.93261 3.5 3.13687 9C3.21079 10.987 3.17311 13.3851 3.5 16C4.50007 24 14 21.5 15.5 21V19.5C15.5 19.5 7.5 21 7.99993 17Z" data-astro-cid-sz7xmlte="" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg> <span class="flex pl-2" data-astro-cid-sz7xmlte>Mastodon</span></a></li><li data-astro-cid-sz7xmlte><a href="https://www.twitch.tv/loige" class="flex align-middle font-normal" rel="me" data-astro-cid-sz7xmlte><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img" class="lucide lucide-twitch" data-astro-cid-sz7xmlte="" fill="none" height="1rem" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="1rem"><path d="M21 2H3v16h5v4l4-4h5l4-4V2zm-10 9V7m5 4V7" data-astro-cid-sz7xmlte=""/></svg> <span class="flex pl-2" data-astro-cid-sz7xmlte>Twitch</span></a></li><li data-astro-cid-sz7xmlte><a href="https://www.youtube.com/loige" class="flex align-middle font-normal" rel="me" data-astro-cid-sz7xmlte><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img" data-astro-cid-sz7xmlte="" fill="none" height="1rem" stroke-width="2" width="1rem"><path d="M14 12L10.5 14V10L14 12Z" fill="currentColor" data-astro-cid-sz7xmlte="" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/><path d="M2 12.7075V11.2924C2 8.39705 2 6.94939 2.90549 6.01792C3.81099 5.08645 5.23656 5.04613 8.08769 4.96549C9.43873 4.92728 10.8188 4.8999 12 4.8999C13.1812 4.8999 14.5613 4.92728 15.9123 4.96549C18.7634 5.04613 20.189 5.08645 21.0945 6.01792C22 6.94939 22 8.39705 22 11.2924V12.7075C22 15.6028 22 17.0505 21.0945 17.9819C20.189 18.9134 18.7635 18.9537 15.9124 19.0344C14.5613 19.0726 13.1812 19.1 12 19.1C10.8188 19.1 9.43867 19.0726 8.0876 19.0344C5.23651 18.9537 3.81097 18.9134 2.90548 17.9819C2 17.0505 2 15.6028 2 12.7075Z" data-astro-cid-sz7xmlte="" stroke="currentColor" stroke-width="2"/></svg> <span class="flex pl-2" data-astro-cid-sz7xmlte>YouTube</span></a></li><li data-astro-cid-sz7xmlte><a href="https://www.linkedin.com/in/lucianomammino/" class="flex align-middle font-normal" rel="me" data-astro-cid-sz7xmlte><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img" class="lucide lucide-linkedin" data-astro-cid-sz7xmlte="" fill="none" height="1rem" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="1rem"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z" data-astro-cid-sz7xmlte=""/><rect data-astro-cid-sz7xmlte="" height="12" width="4" x="2" y="9"/><circle cx="4" cy="4" data-astro-cid-sz7xmlte="" r="2"/></svg> <span class="flex pl-2" data-astro-cid-sz7xmlte>LinkedIn</span></a></li><li data-astro-cid-sz7xmlte><a href="https://github.com/lmammino" class="flex align-middle font-normal" rel="me" data-astro-cid-sz7xmlte><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img" class="lucide lucide-github" data-astro-cid-sz7xmlte="" fill="none" height="1rem" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="1rem"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4" data-astro-cid-sz7xmlte=""/><path d="M9 18c-4.51 2-5-2-7-2" data-astro-cid-sz7xmlte=""/></svg> <span class="flex pl-2" data-astro-cid-sz7xmlte>GitHub</span></a></li></ul></div></div></div></div></footer></body></html>